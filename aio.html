<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to HPC: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="assets/styles.css">
<script src="assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="favicons/incubator/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicons/incubator/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicons/incubator/favicon-16x16.png">
<link rel="manifest" href="favicons/incubator/site.webmanifest">
<link rel="mask-icon" href="favicons/incubator/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav incubator"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="incubator-logo" alt="Lesson Description" src="assets/images/incubator-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Learner View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/aio.html';">Instructor View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav incubator" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="assets/images/incubator-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to HPC
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to HPC
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glossary</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Learner Profiles</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to HPC
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Learner View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/aio.html">Instructor View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Setup</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="10-hpc-intro.html">1. Why use an HPC System?</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="20-cluster.html">2. Working on a remote HPC system</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="30-scheduler.html">3. Working with the scheduler</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="40-modules.html">4. Accessing software via Modules</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="50-transferring-files.html">5. Transferring files with remote computers</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="70-resources.html">6. Using resources effectively</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="80-responsibility.html">7. Using shared resources responsibly</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="test.html">8. Using Markdown</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glossary</a>
                      </li>
                      <li>
                        <a href="profiles.html">Learner Profiles</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-10-hpc-intro"><p>Content from <a href="10-hpc-intro.html">Why use an HPC System?</a></p>
<hr>
<p>Last updated on 2025-02-17 |

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/episodes/10-hpc-intro.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Why would I be interested in High Performance Computing (HPC)?</li>
<li>What can I expect to learn from this course?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Be able to describe what an HPC system is</li>
<li>Identify how an HPC system could benefit you.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="hpc-research-examples">HPC research examples<a class="anchor" aria-label="anchor" href="#hpc-research-examples"></a>
</h2>
<hr class="half-width">
<p>Frequently, research problems that use computing can outgrow the
capabilities of the desktop or laptop computer where they started:</p>
<ul>
<li>A statistics student wants to cross-validate a model. This involves
running the model 1000 times — but each run takes an hour. Running the
model on a laptop will take over a month! In this research problem,
final results are calculated after all 1000 models have run, but
typically only one model is run at a time (in <strong>serial</strong>)
on the laptop. Since each of the 1000 runs is independent of all others,
and given enough computers, it’s theoretically possible to run them all
at once (in <strong>parallel</strong>).</li>
<li>A genomics researcher has been using small datasets of sequence
data, but soon will be receiving a new type of sequencing data that is
10 times as large. It’s already challenging to open the datasets on a
computer — analyzing these larger datasets will probably crash it. In
this research problem, the calculations required might be impossible to
parallelize, but a computer with <strong>more memory</strong> would be
required to analyze the much larger future data set.</li>
<li>An engineer is using a fluid dynamics package that has an option to
run in parallel. So far, this option was not utilized on a desktop. In
going from 2D to 3D simulations, the simulation time has more than
tripled. It might be useful to take advantage of that option or feature.
In this research problem, the calculations in each region of the
simulation are largely independent of calculations in other regions of
the simulation. It’s possible to run each region’s calculations
simultaneously (in <strong>parallel</strong>), communicate selected
results to adjacent regions as needed, and repeat the calculations to
converge on a final set of results. In moving from a 2D to a 3D model,
<strong>both the amount of data and the amount of calculations increases
greatly</strong>, and it’s theoretically possible to distribute the
calculations across multiple computers communicating over a shared
network.</li>
</ul>
<p>In all these cases, access to more (and larger) computers is needed.
Those computers should be usable at the same time, <strong>solving many
researchers’ problems in parallel</strong>.</p>
<div id="break-the-ice" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="break-the-ice" class="callout-inner">
<h3 class="callout-title">Break the Ice</h3>
<div class="callout-content">
<p>Talk to your neighbour, office mate or <a href="https://rubberduckdebugging.com/" class="external-link">rubber duck</a> about your
research.</p>
<ul>
<li>How does computing help you do your research?</li>
<li>How could more computing help you do more or better research?</li>
</ul>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="jargon-busting">Jargon Busting<a class="anchor" aria-label="anchor" href="#jargon-busting"></a>
</h2>
<hr class="half-width">
<div class="section level3">
<h3 id="your-personal-computer">Your Personal Computer<a class="anchor" aria-label="anchor" href="#your-personal-computer"></a>
</h3>
<p>We are probably all familiar with a laptop or a desktop computer
(some call it a PC for Personal Computer). These computers are aimed at
individual users. Each one of us in the classroom has our own computer
in front of us and we can work independantly of one another. It is good
for performaing local and personal tasks but it has limited
resources.</p>
</div>
<div class="section level3">
<h3 id="shared-computing-resources">Shared Computing Resources<a class="anchor" aria-label="anchor" href="#shared-computing-resources"></a>
</h3>
<p>What happens when we want to share resources, like printers or files?
In the late 1950s the US military built a network of computers that used
modems and normal telephone lines connect to one another. Things have
progressed quite a bit since then. Today our computers can talk to one
another in several ways. At most universities you might notice that the
desktop computers have a wire (called an Ethernet cable) that connects
it to the university’s network. Laptops and other devices such as phones
and tablets can also connect to networks using WiFi which is a wireless
technology using radio waves. However what happens if we want a computer
to perform a task which requires much more hardware than what our
desktop of laptop can provide us with.</p>
</div>
<div class="section level3">
<h3 id="a-large-computer">A Large Computer<a class="anchor" aria-label="anchor" href="#a-large-computer"></a>
</h3>
</div>
<div class="section level3">
<h3 id="cloud-systems">Cloud Systems<a class="anchor" aria-label="anchor" href="#cloud-systems"></a>
</h3>
</div>
<div class="section level3">
<h3 id="a-cluster-or-supercomputer">A Cluster or Supercomputer<a class="anchor" aria-label="anchor" href="#a-cluster-or-supercomputer"></a>
</h3>
</div>
</section><section><h2 class="section-heading" id="a-standard-laptop-for-standard-tasks">A Standard Laptop for Standard Tasks<a class="anchor" aria-label="anchor" href="#a-standard-laptop-for-standard-tasks"></a>
</h2>
<hr class="half-width">
<p>Today, people coding or analysing data typically work with
laptops.</p>
<figure><img src="fig/200px-laptop-openclipartorg-aoguerrero.svg" alt="A standard laptop" class="figure mx-auto d-block"><div class="figcaption">A standard laptop</div>
</figure><p>Let’s dissect what resources programs running on a laptop
require:</p>
<ul>
<li>the keyboard and/or touchpad is used to tell the computer what to do
(<strong>Input</strong>)</li>
<li>the internal computing resources <strong>Central Processing
Unit</strong> and <strong>Memory</strong> perform calculation</li>
<li>the display depicts progress and results
(<strong>Output</strong>)</li>
</ul>
<p>Schematically, this can be reduced to the following:</p>
<figure><img src="fig/Simple_Von_Neumann_Architecture.svg" alt="Schematic of how a computer works" class="figure mx-auto d-block"><div class="figcaption">Schematic of how a computer works</div>
</figure></section><section><h2 class="section-heading" id="when-tasks-take-too-long">When Tasks Take Too Long<a class="anchor" aria-label="anchor" href="#when-tasks-take-too-long"></a>
</h2>
<hr class="half-width">
<p>When the task to solve becomes heavy on computations, the operations
are typically out-sourced from the local laptop or desktop to elsewhere.
Take for example the task to find the directions for your next vacation.
The capabilities of your laptop are typically not enough to calculate
that route spontaneously: <a href="https://en.wikipedia.org/wiki/Dijkstra's_algorithm" class="external-link">finding
the shortest path</a> through a network runs on the order of (<em>v</em>
log <em>v</em>) time, where <em>v</em> (vertices) represents the number
of intersections in your map. Instead of doing this yourself, you use a
website, which in turn runs on a server, that is almost definitely not
in the same room as you are.</p>
<p><code>{asis} &lt;figure style="max-width: 30%; text-align: center"&gt;   &lt;img src="fig/servers-openclipartorg-ericlemerdy.svg" alt="A rack half full with servers" class="figure"&gt;   &lt;div class="figcaption"&gt;A rack half full with servers&lt;/div&gt; &lt;/figure&gt;</code></p>
<p>Note here, that a server is mostly a noisy computer mounted into a
rack cabinet which in turn resides in a data center. The internet made
it possible that these data centers do not require to be nearby your
laptop. What people call <strong>the cloud</strong> is mostly a
web-service where you can rent such servers by providing your credit
card details and requesting remote resources that satisfy your
requirements. This is often handled through an online, browser-based
interface listing the various machines available and their capacities in
terms of processing power, memory, and storage.</p>
<p>The server itself has no direct display or input methods attached to
it. But most importantly, it has much more storage, memory and compute
capacity than your laptop will ever have. In any case, you need a local
device (laptop, workstation, mobile phone or tablet) to interact with
this remote machine, which people typically call ‘a server’.</p>
</section><section><h2 class="section-heading" id="when-one-server-is-not-enough">When One Server Is Not Enough<a class="anchor" aria-label="anchor" href="#when-one-server-is-not-enough"></a>
</h2>
<hr class="half-width">
<p>If the computational task or analysis to complete is daunting for a
single server, larger agglomerations of servers are used. These go by
the name of “clusters” or “super computers”.</p>
<p><code>{asis} &lt;figure style="max-width: 30%; text-align: center; display: block"&gt;   &lt;img src="fig/serverrack-openclipartorg-psteinb-basedon-ericlemerdy.svg" alt="A rack with servers" class="figure"&gt;   &lt;div class="figcaption"&gt;A rack with servers&lt;/div&gt; &lt;/figure&gt;</code></p>
<p>The methodology of providing the input data, configuring the program
options, and retrieving the results is quite different to using a plain
laptop. Moreover, using a graphical interface is often discarded in
favor of using the command line. This imposes a double paradigm shift
for prospective users asked to</p>
<ol style="list-style-type: decimal">
<li>work with the command line interface (CLI), rather than a graphical
user interface (GUI)</li>
<li>work with a distributed set of computers (called nodes) rather than
the machine attached to their keyboard &amp; mouse</li>
</ol>
<div id="ive-never-used-a-server-have-i" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ive-never-used-a-server-have-i" class="callout-inner">
<h3 class="callout-title">I’ve Never Used a Server, Have I?</h3>
<div class="callout-content">
<p>Take a minute and think about which of your daily interactions with a
computer may require a remote server or even cluster to provide you with
results.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Some Ideas
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ul>
<li>Checking email: your computer (possibly in your pocket) contacts a
remote machine, authenticates, and downloads a list of new messages; it
also uploads changes to message status, such as whether you read, marked
as junk, or deleted the message. Since yours is not the only account,
the mail server is probably one of many in a data center.</li>
<li>Searching for a phrase online involves comparing your search term
against a massive database of all known sites, looking for matches. This
“query” operation can be straightforward, but building that database is
a <a href="https://en.wikipedia.org/wiki/MapReduce" class="external-link">monumental task</a>!
Servers are involved at every step.</li>
<li>Searching for directions on a mapping website involves connecting
your
<ol style="list-style-type: upper-alpha">
<li>starting and (B) end points by <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" class="external-link">traversing a
graph</a> in search of the “shortest” path by distance, time, expense,
or another metric. Converting a map into the right form is relatively
simple, but calculating all the possible routes between A and B is
expensive.</li>
</ol>
</li>
</ul>
<p>Checking email could be serial: your machine connects to one server
and exchanges data. Searching by querying the database for your search
term (or endpoints) could also be serial, in that one machine receives
your query and returns the result. However, assembling and storing the
full database is far beyond the capability of any one machine.
Therefore, these functions are served in parallel by a large, <a href="https://en.wikipedia.org/wiki/Hyperscale_computing" class="external-link">“hyperscale”</a>
collection of servers working together.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“High Performance Computing (HPC) typically involves connecting to
very large computing systems elsewhere in the world.”</li>
<li>“These other systems can be used to do work that would either be
impossible or much slower on smaller systems.”</li>
<li>“The standard method of interacting with such systems is via a
command line interface called Bash.”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-20-cluster"><p>Content from <a href="20-cluster.html">Working on a remote HPC system</a></p>
<hr>
<p>Last updated on 2025-02-14 |

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/episodes/20-cluster.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is an HPC system?</li>
<li>How does an HPC system work?</li>
<li>How do I log on to a remote HPC system?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Connect to a remote HPC system.</li>
<li>Understand the general HPC system architecture.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-is-an-hpc-system">What Is an HPC System?<a class="anchor" aria-label="anchor" href="#what-is-an-hpc-system"></a>
</h2>
<hr class="half-width">
<p>The words “cloud”, “cluster”, and the phrase “high-performance
computing” or “HPC” are used a lot in different contexts and with
various related meanings. So what do they mean? And more importantly,
how do we use them in our work?</p>
<p>The <em>cloud</em> is a generic term commonly used to refer to
computing resources that are a) <em>provisioned</em> to users on demand
or as needed and b) represent real or <em>virtual</em> resources that
may be located anywhere on Earth. For example, a large company with
computing resources in Brazil, Zimbabwe and Japan may manage those
resources as its own <em>internal</em> cloud and that same company may
also utilize commercial cloud resources provided by Amazon or Google.
Cloud resources may refer to machines performing relatively simple tasks
such as serving websites, providing shared storage, providing web
services (such as e-mail or social media platforms), as well as more
traditional compute intensive tasks such as running a simulation.</p>
<p>The term <em>HPC system</em>, on the other hand, describes a
stand-alone resource for computationally intensive workloads. They are
typically comprised of a multitude of integrated processing and storage
elements, designed to handle high volumes of data and/or large numbers
of floating-point operations (<a href="https://en.wikipedia.org/wiki/FLOPS" class="external-link">FLOPS</a>) with the highest
possible performance. For example, all of the machines on the <a href="https://www.top500.org" class="external-link">Top-500</a> list are HPC systems. To
support these constraints, an HPC resource must exist in a specific,
fixed location: networking cables can only stretch so far, and
electrical and optical signals can travel only so fast.</p>
<p>The word “cluster” is often used for small to moderate scale HPC
resources less impressive than the <a href="https://www.top500.org" class="external-link">Top-500</a>. Clusters are often maintained
in computing centers that support several such systems, all sharing
common networking and storage to support common compute intensive
tasks.</p>
</section><section><h2 class="section-heading" id="logging-in">Logging In<a class="anchor" aria-label="anchor" href="#logging-in"></a>
</h2>
<hr class="half-width">
<p>The first step in using a cluster is to establish a connection from
our laptop to the cluster. When we are sitting at a computer (or
standing, or holding it in our hands or on our wrists), we have come to
expect a visual display with icons, widgets, and perhaps some windows or
applications: a graphical user interface, or GUI. Since computer
clusters are remote resources that we connect to over often slow or
laggy interfaces (WiFi and VPNs especially), it is more practical to use
a command-line interface, or CLI, in which commands and results are
transmitted via text, only. Anything other than text (images, for
example) must be written to disk and opened with a separate program.</p>
<p>If you have ever opened the Windows Command Prompt or macOS Terminal,
you have seen a CLI. If you have already taken The Carpentries’ courses
on the UNIX Shell or Version Control, you have used the CLI on your
local machine somewhat extensively. The only leap to be made here is to
open a CLI on a <em>remote</em> machine, while taking some precautions
so that other folks on the network can’t see (or change) the commands
you’re running or the results the remote machine sends back. We will use
the Secure SHell protocol (or SSH) to open an encrypted network
connection between two machines, allowing you to send &amp; receive text
and data without having to worry about prying eyes.</p>
<figure><img src="fig/connect-to-remote.svg" alt="Connect to cluster" class="figure mx-auto d-block"><div class="figcaption">Connect to cluster</div>
</figure><p>Make sure you have a SSH client installed on your laptop. Refer to
the <a href="index.html">setup</a> section for more details. SSH clients
are usually command-line tools, where you provide the remote machine
address as the only required argument. If your username on the remote
system differs from what you use locally, you must provide that as well.
If your SSH client has a graphical front-end, such as PuTTY or
MobaXterm, you will set these arguments before clicking “connect.” From
the terminal, you’ll write something like
<code>ssh userName@hostname</code>, where the “@” symbol is used to
separate the two parts of a single argument.</p>
<p>Go ahead and open your terminal or graphical SSH client, then log in
to the cluster using your username.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ ssh userid@rocket.hpc</span></code></pre>
</div>
<p>Remember to replace <strong>userid</strong> with your username or the
one supplied by the instructors. You may be asked for your password.
Watch out: the characters you type after the password prompt are not
displayed on the screen. Normal output will resume once you press
<code>Enter</code>.</p>
</section><section><h2 class="section-heading" id="where-are-we">Where Are We?<a class="anchor" aria-label="anchor" href="#where-are-we"></a>
</h2>
<hr class="half-width">
<p>Very often, many users are tempted to think of a high-performance
computing installation as one giant, magical machine. Sometimes, people
will assume that the computer they’ve logged onto is the entire
computing cluster. So what’s really happening? What computer have we
logged on to? The name of the current computer we are logged onto can be
checked with the <code>hostname</code> command. (You may also notice
that the current hostname is also part of our prompt!)</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ hostname</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">login01.cluster</span></span></code></pre>
</div>
<div id="whats-in-your-home-directory" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="whats-in-your-home-directory" class="callout-inner">
<h3 class="callout-title">What’s in Your Home Directory?</h3>
<div class="callout-content">
<p>The system administrators may have configured your home directory
with some helpful files, folders, and links (shortcuts) to space
reserved for you on other filesystems. Take a look around and see what
you can find. <em>Hint:</em> The shell commands <code>pwd</code> and
<code>ls</code> may come in handy. Home directory contents vary from
user to user. Please discuss any differences you spot with your
neighbors.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> It’s a Beautiful Day in the Neighborhood </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The deepest layer should differ: <strong>userid</strong> is uniquely
yours. Are there differences in the path at higher levels?</p>
<p>If both of you have empty directories, they will look identical. If
you or your neighbor has used the system before, there may be
differences. What are you working on?</p>
<p>Use <code>pwd</code> to <strong>p</strong>rint the
<strong>w</strong>orking <strong>d</strong>irectory path:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  pwd</span></code></pre>
</div>
<p>You can run <code>ls</code> to <strong>l</strong>i<strong>s</strong>t
the directory contents, though it’s possible nothing will show up (if no
files have been provided). To be sure, use the <code>-a</code> flag to
show hidden files, too.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  ls <span class="at">-a</span></span></code></pre>
</div>
<p>At a minimum, this will show the current directory as <code>.</code>,
and the parent directory as <code>..</code>.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="nodes">Nodes<a class="anchor" aria-label="anchor" href="#nodes"></a>
</h2>
<hr class="half-width">
<p>Individual computers that compose a cluster are typically called
<em>nodes</em> (although you will also hear people call them
<em>servers</em>, <em>computers</em> and <em>machines</em>). On a
cluster, there are different types of nodes for different types of
tasks. The node where you are right now is called the <em>head
node</em>, <em>login node</em>, <em>landing pad</em>, or <em>submit
node</em>. A login node serves as an access point to the cluster.</p>
<p>As a gateway, it is well suited for uploading and downloading files,
setting up software, and running quick tests. Generally speaking, the
login node should not be used for time-consuming or resource-intensive
tasks. You should be alert to this, and check with your site’s operators
or documentation for details of what is and isn’t allowed. In these
lessons, we will avoid running jobs on the head node.</p>
<div id="dedicated-transfer-nodes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="dedicated-transfer-nodes" class="callout-inner">
<h3 class="callout-title">Dedicated Transfer Nodes</h3>
<div class="callout-content">
<p>If you want to transfer larger amounts of data to or from the
cluster, some systems offer dedicated nodes for data transfers only. The
motivation for this lies in the fact that larger data transfers should
not obstruct operation of the login node for anybody else. Rocket does
not have a dedicated transfer node but do check for this onother HPC
systems you may use. As a rule of thumb, consider all transfers of a
volume larger than 500 MB to 1 GB as large. But these numbers change,
e.g., depending on the network connection of yourself and of your
cluster or other factors.</p>
</div>
</div>
</div>
<p>The real work on a cluster gets done by the <em>worker</em> (or
<em>compute</em>) <em>nodes</em>. Worker nodes come in many shapes and
sizes, but generally are dedicated to long or hard tasks that require a
lot of computational resources.</p>
<p>All interaction with the worker nodes is handled by a specialized
piece of software called a scheduler (the scheduler used in this lesson
is called <strong>Slurm</strong>). We’ll learn more about how to use the
scheduler to submit jobs next, but for now, it can also tell us more
information about the worker nodes.</p>
<p>For example, we can view all of the worker nodes by running the
command <strong>sinfo</strong>.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ sinfo</span></code></pre>
</div>
<pre><code>PARTITION   AVAIL  TIMELIMIT  NODES  STATE NODELIST
dell-gpu       up 21-00:00:0      1   idle gpu01
defq*          up 2-00:00:00      6   drng sb[019,025,029,062,069,073]
defq*          up 2-00:00:00      1  drain sb060
defq*          up 2-00:00:00     45    mix sb[001,003-004,006-007,009-012,014-015,017,023,027-028,032-036,038-039,041-045,047,050,053-054,058-059,061,066-068,072,078,084,086,092,104,108,110]
defq*          up 2-00:00:00     58  alloc sb[002,005,008,013,016,018,020-022,024,026,030-031,037,040,046,048-049,051-052,055-057,063-065,070-071,074-077,079-083,085,087-091,093-103,105-107,109]
short          up      10:00      6   drng sb[019,025,029,062,069,073]
</code></pre>
<p>There are also specialized machines used for managing disk storage,
user authentication, and other infrastructure-related tasks. Although we
do not typically logon to or interact with these machines directly, they
enable a number of key features like ensuring our user account and files
are available throughout the HPC system.</p>
</section><section><h2 class="section-heading" id="whats-in-a-node">What's in a Node?<a class="anchor" aria-label="anchor" href="#whats-in-a-node"></a>
</h2>
<hr class="half-width">
<p>All of the nodes in an HPC system have the same components as your
own laptop or desktop: <em>CPUs</em> (sometimes also called
<em>processors</em> or <em>cores</em>), <em>memory</em> (or
<em>RAM</em>), and <em>disk</em> space. CPUs are a computer’s tool for
actually running programs and calculations. Information about a current
task is stored in the computer’s memory. Disk refers to all storage that
can be accessed like a file system. This is generally storage that can
hold data permanently, i.e. data is still there even if the computer has
been restarted. While this storage can be local (a hard drive installed
inside of it), it is more common for nodes to connect to a shared,
remote fileserver or cluster of servers.</p>
<figure><img src="fig/node_anatomy.png" max-width="20%" caption="" alt="Node anatomy" class="figure mx-auto d-block"><div class="figcaption">Node anatomy</div>
</figure><div id="explore-your-computer" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="explore-your-computer" class="callout-inner">
<h3 class="callout-title">Explore Your Computer</h3>
<div class="callout-content">
<p>Try to find out the number of CPUs and amount of memory available on
your personal computer. Note that, if you’re logged in to the remote
computer cluster, you need to log out first. To do so, type
<code>Ctrl+d</code> or <code>exit</code>:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  exit</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ </span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>There are several ways to do this. Most operating systems have a
graphical system monitor, like the Windows Task Manager. More detailed
information can sometimes be found on the command line. For example,
some of the commands used on a Linux system are:</p>
<p>Run system utilities</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  nproc <span class="at">--all</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  free <span class="at">-m</span></span></code></pre>
</div>
<p>Read from <code>/proc</code></p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  cat /proc/cpuinfo</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  cat /proc/meminfo</span></code></pre>
</div>
<p>Run system monitor</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  htop</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="explore-the-login-node" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="explore-the-login-node" class="callout-inner">
<h3 class="callout-title">Explore the login node</h3>
<div class="callout-content">
<p>Now compare the resources of your computer with those of the head
node.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  ssh userid@rocket.hpc</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  nproc <span class="at">--all</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  free <span class="at">-m</span></span></code></pre>
</div>
<p>You can get more information about the processors using
<code>lscpu</code>, and a lot of detail about the memory by reading the
file <code>/proc/meminfo</code>:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  less /proc/meminfo</span></code></pre>
</div>
<p>You can also explore the available filesystems using <code>df</code>
to show <strong>d</strong>isk <strong>f</strong>ree space. The
<code>-h</code> flag renders the sizes in a human-friendly format, i.e.,
GB instead of B. The <strong>t</strong>ype flag <code>-T</code> shows
what kind of filesystem each resource is.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  df <span class="at">-Th</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="discussion1" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Discussion</h3>
<div class="callout-content">
<p>The local filesystems (ext, tmp, xfs, zfs) will depend on whether
you’re on the same login node (or compute node, later on). Networked
filesystems (beegfs, cifs, gpfs, nfs, pvfs) will be similar — but may
include userid, depending on how it is <a href="https://en.wikipedia.org/wiki/Mount_(computing)" class="external-link">mounted</a>.</p>
</div>
</div>
</div>
<div id="shared-filesystems" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="shared-filesystems" class="callout-inner">
<h3 class="callout-title">Shared Filesystems</h3>
<div class="callout-content">
<p>This is an important point to remember: files saved on one node
(computer) are often available everywhere on the cluster!</p>
<div id="explore-a-worker-node" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="explore-a-worker-node" class="callout-inner">
<h3 class="callout-title">Explore a Worker Node</h3>
<div class="callout-content">
<p>Finally, let’s look at the resources available on the worker nodes
where your jobs will actually run. Try running this command to see the
name, CPUs and memory available on one of the worker nodes:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  sinfo <span class="at">-n</span> <span class="at">-o</span> <span class="st">"%n %c %m"</span> <span class="at">-o</span> <span class="st">"%n %c %m"</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="compare-your-computer-the-login-node-and-the-compute-node" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="compare-your-computer-the-login-node-and-the-compute-node" class="callout-inner">
<h3 class="callout-title">Compare Your Computer, the login node and the compute node</h3>
<div class="callout-content">
<p>Compare your laptop’s number of processors and memory with the
numbers you see on the cluster head node and worker node. Discuss the
differences with your neighbor.</p>
<p>What implications do you think the differences might have on running
your research work on the different systems and nodes?</p>
</div>
</div>
</div>
<div id="differences-between-nodes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="differences-between-nodes" class="callout-inner">
<h3 class="callout-title">Differences Between Nodes</h3>
<div class="callout-content">
<p>Many HPC clusters have a variety of nodes optimized for particular
workloads. Some nodes may have larger amount of memory, or specialized
resources such as Graphical Processing Units (GPUs).</p>
</div>
</div>
</div>
<p>With all of this in mind, we will now cover how to talk to the
cluster’s scheduler, and use it to start running our scripts and
programs!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“An HPC system is a set of networked machines.”</li>
<li>“HPC systems typically provide login nodes and a set of worker
nodes.”</li>
<li>“The resources found on independent (worker) nodes can vary in
volume and type (amount of RAM, processor architecture, availability of
network mounted filesystems, etc.).”</li>
<li>“Files saved on one node are available on all nodes.”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-30-scheduler"><p>Content from <a href="30-scheduler.html">Working with the scheduler</a></p>
<hr>
<p>Last updated on 2025-02-17 |

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/episodes/30-scheduler.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a scheduler and why are they used?</li>
<li>How do I launch a program to run on any one node in the
cluster?</li>
<li>How do I capture the output of a program that is run on a node in
the cluster?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Run a simple Hello World style program on the cluster.</li>
<li>Submit a simple Hello World style script to the cluster.</li>
<li>Use the batch system command line tools to monitor the execution of
your job.</li>
<li>Inspect the output and error files of your jobs.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="job-scheduler">Job Scheduler<a class="anchor" aria-label="anchor" href="#job-scheduler"></a>
</h2>
<hr class="half-width">
<p>An HPC system might have thousands of nodes and thousands of users.
How do we decide who gets what and when? How do we ensure that a task is
run with the resources it needs? This job is handled by a special piece
of software called the scheduler. On an HPC system, the scheduler
manages which jobs run where and when.</p>
<p>The following illustration compares these tasks of a job scheduler to
a waiter in a restaurant. If you can relate to an instance where you had
to wait for a while in a queue to get in to a popular restaurant, then
you may now understand why sometimes your job do not start instantly as
in your laptop.</p>
<figure><img src="fig/restaurant_queue_manager.svg" caption="" alt="Compare a job scheduler to a waiter in a restaurant" class="figure mx-auto d-block"><div class="figcaption">The waiter scheduler</div>
</figure><p>The scheduler used in this lesson is Slurm. Although Slurm is not
used everywhere, running jobs is quite similar regardless of what
software is being used. The exact syntax might change, but the concepts
remain the same.</p>
</section><section><h2 class="section-heading" id="running-a-batch-job">Running a Batch Job<a class="anchor" aria-label="anchor" href="#running-a-batch-job"></a>
</h2>
<hr class="half-width">
<p>The most basic use of the scheduler is to run a command
non-interactively. Any command (or series of commands) that you want to
run on the cluster is called a <em>job</em>, and the process of using a
scheduler to run the job is called <em>batch job submission</em>.</p>
<p>In this case, the job we want to run is a shell script – essentially
a text file containing a list of UNIX commands to be executed in a
sequential manner. Our shell script will have three parts:</p>
<ul>
<li>On the very first line, add <code>#!/bin/bash. The</code>#!`
(pronounced “hash-bang” or “shebang”) tells the computer what program is
meant to process the contents of this file. In this case, we are telling
it that the commands that follow are written for the command-line shell
(what we’ve been doing everything in so far).</li>
<li>Anywhere below the first line, we’ll add an <code>echo</code>
command with a friendly greeting. When run, the shell script will print
whatever comes after <code>echo</code> in the terminal.
<ul>
<li>
<code>echo -n</code> will print everything that follows,
<em>without</em> ending the line by printing the new-line
character.</li>
</ul>
</li>
<li>On the last line, we’ll invoke the <code>hostname</code> command,
which will print the name of the machine the script is run on.</li>
</ul>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  nano example-job.sh</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  chmod +x example-job.sh</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  cat example-job.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>#!/bin/bash

echo -n "This script is running on "
hostname</code></pre>
</div>
<div id="creating-our-test-job" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="creating-our-test-job" class="callout-inner">
<h3 class="callout-title">Creating Our Test Job</h3>
<div class="callout-content">
<p>Run the script. Does it execute on the cluster or just our login
node?</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  ./example-job.sh</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>This script is running on login01</code></pre>
</div>
<p>This job runs on the login node.</p>
</div>
</div>
</div>
</div>
<p>If you completed the previous challenge successfully, you probably
realise that there is a distinction between running the job through the
scheduler and just “running it”. To submit this job to the scheduler, we
use the <code>sbatch</code> command.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  sbatch <span class="at">--partition</span><span class="op">=</span>short example-job.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sbatch: Warning: Your job has no time specification (--time=) and the default time is short. You can cancel your job with 'scancel &lt;JOB_ID&gt;' if you wish to resubmit.
sbatch: Warning: It appears your working directory may be on the home filesystem. It is /home2/home/ta133/ta133/userid. This is not available from the compute nodes - please check that this is what you intended. You can cancel your job with 'scancel &lt;JOBID&gt;' if you wish to resubmit.
Submitted batch job 286949</code></pre>
</div>
<p>Ah! What went wrong here? Slurm is telling us that the file system we
are currently on, <code>/home</code>, is not available on the compute
nodes and that we are getting the default, short runtime. We will deal
with the runtime later, but we need to move to a different file system
to submit the job and have it visible to the compute nodes. On ARCHER2,
this is the <code>/work</code> file system. The path is similar to home
but with <code>/work</code> at the start. Lets move there now, copy our
job script across and resubmit:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  cd /nobackup/proj/training/userid</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  cp ~/example-job.sh .</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  sbatch <span class="at">--partition</span><span class="op">=</span>short example-job.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Submitted batch job 36855</code></pre>
</div>
<p>That’s better! And that’s all we need to do to submit a job. Our work
is done — now the scheduler takes over and tries to run the job for us.
While the job is waiting to run, it goes into a list of jobs called the
<em>queue</em>. To check on our job’s status, we check the queue using
the command <code>squeue -u userid</code>.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  squeue <span class="at">-u</span> userid</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>JOBID USER         ACCOUNT     NAME           ST REASON START_TIME         T...
36856 yourUsername yourAccount example-job.sh R  None   2017-07-01T16:47:02 ...</code></pre>
</div>
<p>We can see all the details of our job, most importantly that it is in
the <code>R</code> or <code>RUNNING</code> state. Sometimes our jobs
might need to wait in a queue (<code>PENDING</code>) or have an error
(<code>E</code>).</p>
<p>The best way to check our job’s status is with <code>squeue</code>.
Of course, running <code>squeue</code> repeatedly to check on things can
be a little tiresome. To see a real-time view of our jobs, we can use
the <code>watch</code> command. <code>watch</code> reruns a given
command at 2-second intervals. This is too frequent, and will likely
upset your system administrator. You can change the interval to a more
reasonable value, for example 15 seconds, with the <code>-n 15</code>
parameter. Let’s try using it to monitor another job.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  sbatch <span class="at">--partition</span><span class="op">=</span>short example-job.sh</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  watch <span class="at">-n</span> 15 squeue <span class="at">-u</span> userid</span></code></pre>
</div>
<p>You should see an auto-updating display of your job’s status. When it
finishes, it will disappear from the queue. Press <code>Ctrl-c</code>
when you want to stop the <code>watch</code> command.</p>
<div id="wheres-the-output" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="wheres-the-output" class="callout-inner">
<h3 class="callout-title">Where’s the Output?</h3>
<div class="callout-content">
<p>On the login node, this script printed output to the terminal — but
when we exit <code>watch</code>, there’s nothing. Where’d it go? HPC job
output is typically redirected to a file in the directory you launched
it from. Use <code>ls</code> to find and read the file.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="customising-a-job">Customising a Job<a class="anchor" aria-label="anchor" href="#customising-a-job"></a>
</h2>
<hr class="half-width">
<p>The job we just ran used some of the scheduler’s default options. In
a real-world scenario, that’s probably not what we want. The default
options represent a reasonable minimum. Chances are, we will need more
cores, more memory, more time, among other special considerations. To
get access to these resources we must customize our job script.</p>
<p>Comments in UNIX shell scripts (denoted by <code>#</code>) are
typically ignored, but there are exceptions. For instance the special
<code>#!</code> comment at the beginning of scripts specifies what
program should be used to run it (you’ll typically see
<code>#!/bin/bash</code>). Schedulers like Slurm also have a special
comment used to denote special scheduler-specific options. Though these
comments differ from scheduler to scheduler, Slurm’s special comment is
<code>#SBATCH</code>. Anything following the <code>#SBATCH</code>
comment is interpreted as an instruction to the scheduler.</p>
<p>Let’s illustrate this by example. By default, a job’s name is the
name of the script, but the <code>--job-name</code> option can be used
to change the name of a job. Add an option to the script:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  cat example-job.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>#!/bin/bash
#SBATCH--job-name new_name

echo -n "This script is running on "
hostname
echo "This script has finished successfully."</code></pre>
</div>
<p>Submit the job and monitor its status:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  sbatch <span class="at">--partition</span><span class="op">=</span>short example-job.sh</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  squeue <span class="at">-u</span> userid</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>JOBID USER         ACCOUNT     NAME     ST REASON   START_TIME TIME TIME_LEFT NODES CPUS
38191 yourUsername yourAccount new_name PD Priority N/A        0:00 1:00:00   1     1</code></pre>
</div>
<p>Fantastic, we’ve successfully changed the name of our job!</p>
<div class="section level3">
<h3 id="resource-requests">Resource Requests<a class="anchor" aria-label="anchor" href="#resource-requests"></a>
</h3>
<p>But what about more important changes, such as the number of cores
and memory for our jobs? One thing that is absolutely critical when
working on an HPC system is specifying the resources required to run a
job. This allows the scheduler to find the right time and place to
schedule our job. If you do not specify requirements (such as the amount
of time you need), you will likely be stuck with your site’s default
resources, which is probably not what you want.</p>
<p>The following are several key resource requests:</p>
<ul>
<li>
<code>--nodes=&lt;nodes&gt;</code> - Number of nodes to use</li>
<li>
<code>--ntasks-per-node=&lt;tasks-per-node&gt;</code> - Number of
parallel processes per node</li>
<li>
<code>--cpus-per-task=&lt;cpus-per-task&gt;</code> - Number of cores
to assign to each parallel process</li>
<li>
<code>--time=&lt;days-hours:minutes:seconds&gt;</code> - Maximum
real-world time (walltime) your job will be allowed to run. The
<code>&lt;days&gt;</code> part can be omitted.</li>
</ul>
<p>Note that just <em>requesting</em> these resources does not make your
job run faster, nor does it necessarily mean that you will consume all
of these resources. It only means that these are made available to you.
Your job may end up using less memory, or less time, or fewer tasks or
nodes, than you have requested, and it will still run.</p>
<p>It’s best if your requests accurately reflect your job’s
requirements. We’ll talk more about how to make sure that you’re using
resources effectively in a later episode of this lesson.</p>
<div id="command-line-options-or-job-script-options" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="command-line-options-or-job-script-options" class="callout-inner">
<h3 class="callout-title">Command line options or job script options?</h3>
<div class="callout-content">
<p>All of the options we specify can be supplied on the command line (as
we do here for <code>--partition=short</code>) or in the job script (as
we have done for the job name above). These are interchangeable. It is
often more convenient to put the options in the job script as it avoids
lots of typing at the command line.</p>
</div>
</div>
</div>
<div id="submitting-resource-requests" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="submitting-resource-requests" class="callout-inner">
<h3 class="callout-title">Submitting Resource Requests</h3>
<div class="callout-content">
<p>Modify our <code>hostname</code> script so that it runs for a minute,
then submit a job for it on the cluster. You should also move all the
options we have been specifying on the command line
(e.g. <code>--partition</code>) into the script at this point.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  cat example-job.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>#!/bin/bash
#SBATCH--time 00:01:15
#SBATCH--partition=short
#SBATCH--qos=short
echo -n "This script is running on "
sleep 60 # time in seconds
hostname
echo "This script has finished successfully."</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  sbatch example-job.sh</span></code></pre>
</div>
<p>Why are the Slurm runtime and <code>sleep</code> time not
identical?</p>
</div>
</div>
</div>
</div>
<div id="job-environment-variables" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="job-environment-variables" class="callout-inner">
<h3 class="callout-title">Job environment variables</h3>
<div class="callout-content">
<p>When Slurm runs a job, it sets a number of environment variables for
the job. One of these will let us check our work from the last problem.
The <code>SLURM_CPUS_PER_TASK</code> variable is set to the number of
CPUs we requested with <code>-c</code>. Using the
<code>SLURM_CPUS_PER_TASK</code> variable, modify your job so that it
prints how many CPUs have been allocated.</p>
</div>
</div>
</div>
<p>Resource requests are typically binding. If you exceed them, your job
will be killed. Let’s use walltime as an example. We will request 30
seconds of walltime, and attempt to run a job for two minutes.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  cat example-job.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>#!/bin/bash
#SBATCH--job-name long_job
#SBATCH--time 00:00:30
#SBATCH--partition=short
#SBATCH--qos=short

echo "This script is running on ... "
sleep 120 # time in seconds
hostname
echo "This script has finished successfully."</code></pre>
</div>
<p>Submit the job and wait for it to finish. Once it is has finished,
check the log file.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  sbatch example-job.sh</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  watch <span class="at">-n</span> 15 squeue <span class="at">-u</span> userid</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  cat slurm-38193.out</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>This job is running on:
sb060
slurmstepd: error: *** JOB 38193 ON cn01 CANCELLED AT 2017-07-02T16:35:48 DUE TO TIME LIMIT ***</code></pre>
</div>
<p>Our job was killed for exceeding the amount of resources it
requested. Although this appears harsh, this is actually a feature.
Strict adherence to resource requests allows the scheduler to find the
best possible place for your jobs. Even more importantly, it ensures
that another user cannot use more resources than they’ve been given. If
another user messes up and accidentally attempts to use all of the cores
or memory on a node, Slurm will either restrain their job to the
requested resources or kill the job outright. Other jobs on the node
will be unaffected. This means that one user cannot mess up the
experience of others, the only jobs affected by a mistake in scheduling
will be their own.</p>
<div id="but-how-much-does-it-cost" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="but-how-much-does-it-cost" class="callout-inner">
<h3 class="callout-title">But how much does it cost?</h3>
<div class="callout-content">
<p>Although your job will be killed if it exceeds the selected runtime,
a job that completes within the time limit is only charged for the time
it actually used. However, you should always try and specify a wallclock
limit that is close to (but greater than!) the expected runtime as this
will enable your job to be scheduled more quickly. If you say your job
will run for an hour, the scheduler has to wait until a full hour
becomes free on the machine. If it only ever runs for 5 minutes, you
could have set a limit of 10 minutes and it might have been run earlier
in the gaps between other users’ jobs.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="cancelling-a-job">Cancelling a Job<a class="anchor" aria-label="anchor" href="#cancelling-a-job"></a>
</h2>
<hr class="half-width">
<p>Sometimes we’ll make a mistake and need to cancel a job. This can be
done with the <code>scancel</code> command. Let’s submit a job and then
cancel it using its job number (remember to change the walltime so that
it runs long enough for you to cancel it before it is killed!).</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  example-job.sh example-job.sh</span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  squeue <span class="at">-u</span> userid</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Submitted batch job 38759

JOBID USER         ACCOUNT     NAME           ST REASON   START_TIME TIME TIME_LEFT NODES CPUS
38759 yourUsername yourAccount example-job.sh PD Priority N/A        0:00 1:00      1     1</code></pre>
</div>
<p>Now cancel the job with its job number (printed in your terminal).
Absence of any job info indicates that the job has been successfully
cancelled.</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  scancel 38759</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="co"># It might take a minute for the job to disappear from the queue...</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  squeue <span class="at">-u</span> userid</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>JOBID  USER  ACCOUNT  NAME  ST  REASON  START_TIME  TIME  TIME_LEFT  NODES  CPUS</code></pre>
</div>
<div id="cancelling-multiple-jobs" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="cancelling-multiple-jobs" class="callout-inner">
<h3 class="callout-title">Cancelling multiple jobs</h3>
<div class="callout-content">
<p>We can also cancel all of our jobs at once using the <code>-u</code>
option. This will delete all jobs for a specific user (in this case us).
Note that you can only delete your own jobs. Try submitting multiple
jobs and then cancelling them all with
<code>scancel -u yourUsername</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="other-types-of-jobs">Other Types of Jobs<a class="anchor" aria-label="anchor" href="#other-types-of-jobs"></a>
</h2>
<hr class="half-width">
<p>Up to this point, we’ve focused on running jobs in batch mode. Slurm
also provides the ability to start an interactive session.</p>
<p>There are very frequently tasks that need to be done interactively.
Creating an entire job script might be overkill, but the amount of
resources required is too much for a login node to handle. A good
example of this might be building a genome index for alignment with a
tool like <a href="https://ccb.jhu.edu/software/hisat2/index.shtml" class="external-link">HISAT2</a>.
Fortunately, we can run these types of tasks as a one-off with
<code>srun</code>.</p>
<p><code>srun</code> runs a single command in the queue system and then
exits. Let’s demonstrate this by running the <code>hostname</code>
command with <code>srun</code>. (We can cancel an <code>srun</code> job
with <code>Ctrl-c</code>.)</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  srun <span class="at">--partition</span><span class="op">=</span>short <span class="at">--time</span><span class="op">=</span>00:01:00 hostname</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">nid001976</span></span></code></pre>
</div>
<p><code>srun</code> accepts all of the same options as
<code>sbatch</code>. However, instead of specifying these in a script,
these options are specified on the command-line when starting a job.</p>
<p>Typically, the resulting shell environment will be the same as that
for <code>sbatch</code>.</p>
<div class="section level3">
<h3 id="interactive-jobs">Interactive jobs<a class="anchor" aria-label="anchor" href="#interactive-jobs"></a>
</h3>
<p>Sometimes, you will need a lot of resource for interactive use.
Perhaps it’s our first time running an analysis or we are attempting to
debug something that went wrong with a previous job. Fortunately, SLURM
makes it easy to start an interactive job with <code>srun</code>:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  srun <span class="at">--partition</span><span class="op">=</span>short <span class="at">--pty</span> /bin/bash</span></code></pre>
</div>
<p>You should be presented with a bash prompt. Note that the prompt may
change to reflect your new location, in this case the compute node we
are logged on. You can also verify this with <code>hostname</code>.</p>
<p>When you are done with the interactive job, type <code>exit</code> to
quit your session.</p>
</div>
</section><section><h2 class="section-heading" id="running-parallel-jobs-using-mpi">Running parallel jobs using MPI<a class="anchor" aria-label="anchor" href="#running-parallel-jobs-using-mpi"></a>
</h2>
<hr class="half-width">
<p>As we have already seen, the power of HPC systems comes from
<em>parallelism</em>, i.e. having lots of processors/disks etc.
connected together rather than having more powerful components than your
laptop or workstation. Often, when running research programs on HPC you
will need to run a program that has been built to use the MPI (Message
Passing Interface) parallel library. The MPI library allows programs to
exploit multiple processing cores in parallel to allow researchers to
model or simulate faster on larger problem sizes. The details of how MPI
work are not important for this course or even to use programs that have
been built using MPI; however, MPI programs typically have to be
launched in job submission scripts in a different way to serial programs
and users of parallel programs on HPC systems need to know how to do
this. Specifically, launching parallel MPI programs typically requires
four things:</p>
<ul>
<li>A special parallel launch program such as <code>mpirun</code>,
<code>mpiexec</code>, <code>srun</code> or <code>aprun</code>.</li>
<li>A specification of how many processes to use in parallel. For
example, our parallel program may use 256 processes in parallel.</li>
<li>A specification of how many parallel processes to use per compute
node. For example, if our compute nodes each have 32 cores we often want
to specify 32 parallel processes per node.</li>
<li>The command and arguments for our parallel program.</li>
</ul>
<div id="required-files" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="required-files" class="callout-inner">
<h3 class="callout-title">Required Files</h3>
<div class="callout-content">
<p>** to update for Rocket ** example omp and mpi jobs at
/nobackup/proj/training/parallel_examples/</p>
<p>The program used in this example can be retrieved using wget or a
browser and copied to the remote.</p>
<p><strong>Using wget</strong>:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$  wget http://training.researchcomputing.ncl.ac.uk/training-materials/pi-mpi.py</span></code></pre>
</div>
<p><strong>Using a web browser</strong>:</p>
<p><a href="http://training.researchcomputing.ncl.ac.uk/training-materials/pi-mpi.py" class="external-link">http://training.researchcomputing.ncl.ac.uk/training-materials/pi-mpi.py</a></p>
</div>
</div>
</div>
<p>To illustrate this process, we will use a simple MPI parallel program
that estimates the value of Pi. (We will meet this example program in
more detail in a later episode.) Here is a job submission script that
runs the program across two compute nodes on the cluster. Create a file
(e.g. called: <code>run-pi-mpi.slurm</code>) with the contents of this
script in it.</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="co">#SBATCH --partition=short</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a><span class="ex">**#SBATCH</span> <span class="at">--qos</span><span class="op">=</span>short<span class="pp">**</span></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="co">#SBATCH --time=00:05:00</span></span>
<span id="cb32-6"><a href="#cb32-6" tabindex="-1"></a></span>
<span id="cb32-7"><a href="#cb32-7" tabindex="-1"></a><span class="co">#SBATCH --nodes=1</span></span>
<span id="cb32-8"><a href="#cb32-8" tabindex="-1"></a><span class="co">#SBATCH --ntasks-per-node=16</span></span>
<span id="cb32-9"><a href="#cb32-9" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" tabindex="-1"></a><span class="ex">module</span> load cray-python</span>
<span id="cb32-11"><a href="#cb32-11" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" tabindex="-1"></a><span class="ex">srun</span> python pi-mpi.py 10000000</span></code></pre>
</div>
<p>The parallel launch line for our program can be seen towards the
bottom of the script:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="ex">srun</span> python pi-mpi.py 10000000</span></code></pre>
</div>
<p>And this corresponds to the four required items we described
above:</p>
<ol style="list-style-type: decimal">
<li>Parallel launch program: in this case the parallel launch program is
called <code>srun</code>; the additional argument controls which cores
are used.</li>
<li>Number of parallel processes per node: in this case this is 16, and
is specified by the option <code>--ntasks-per-node=16</code>
option.</li>
<li>Total number of parallel processes: in this case this is also 16,
because we specified 1 node and 16 parallel processes per node.</li>
<li>Our program and arguments: in this case this is
<code>python pi-mpi.py 10000000</code>.`</li>
</ol>
<p>As for our other jobs, we launch using the <code>sbatch</code>
command.</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  example-job.sh run-pi-mpi.slurm</span></code></pre>
</div>
<p>The program generates no output with all details printed to the job
log.</p>
<div id="running-parallel-jobs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="running-parallel-jobs" class="callout-inner">
<h3 class="callout-title">Running parallel jobs</h3>
<div class="callout-content">
<p>Modify the pi-mpi-run script that you used above to use all 128 cores
on one node. Check the output to confirm that it used the correct number
of cores in parallel for the calculation.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Here is a modified script</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="co">#SBATCH --partition=short</span></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="co">#SBATCH --qos=short</span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="co">#SBATCH --time=00:00:30</span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a><span class="co">#SBATCH --nodes=1</span></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="co">#SBATCH --ntasks-per-node=128</span></span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a><span class="ex">module</span> load cray-python</span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="ex">srun</span> python pi-mpi.py 10000000</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="configuring-parallel-jobs" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="configuring-parallel-jobs" class="callout-inner">
<h3 class="callout-title">Configuring parallel jobs</h3>
<div class="callout-content">
<p>You will see in the job output that information is displayed about
where each MPI process is running, in particular which node it is
on.</p>
<p>Modify the pi-mpi-run script that you run a total of 2 nodes and 16
processes; but to use only 8 tasks on each of two nodes. Check the
output file to ensure that you understand the job distribution.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="co">#SBATCH --partition=short</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="co">#SBATCH --qos=short</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="co">#SBATCH --time=00:00:30</span></span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="co">#SBATCH --nodes=2</span></span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="co">#SBATCH --ntasks-per-node=8</span></span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a><span class="ex">module</span> load cray-python</span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a><span class="ex">srun</span> python pi-mpi.py 10000000</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“The scheduler handles how compute resources are shared between
users.”</li>
<li>“Everything you do should be run through the scheduler.”</li>
<li>“A job is just a shell script.”</li>
<li>“If in doubt, request more resources than you will need.”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-40-modules"><p>Content from <a href="40-modules.html">Accessing software via Modules</a></p>
<hr>
<p>Last updated on 2025-02-14 |

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/episodes/40-modules.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we load and unload software packages?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand how to load and use a software package.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>On a high-performance computing system, it is seldom the case that
the software we want to use is available when we log in. It is
installed, but we will need to “load” it before it can run.</p>
<p>Before we start using individual software packages, however, we
should understand the reasoning behind this approach. The three biggest
factors are:</p>
<ul>
<li>software incompatibilities</li>
<li>versioning</li>
<li>dependencies</li>
</ul>
<p>Software incompatibility is a major headache for programmers.
Sometimes the presence (or absence) of a software package will break
others that depend on it. Two of the most famous examples are Python 2
and 3 and C compiler versions. Python 3 famously provides a
<code>python</code> command that conflicts with that provided by Python
2. Software compiled against a newer version of the C libraries and then
used when they are not present will result in a nasty
<code>'GLIBCXX_3.4.20' not found</code> error, for instance.</p>
<p>Software versioning is another common issue. A team might depend on a
certain package version for their research project - if the software
version was to change (for instance, if a package was updated), it might
affect their results. Having access to multiple software versions allow
a set of researchers to prevent software versioning issues from
affecting their results.</p>
<p>Dependencies are where a particular software package (or even a
particular version) depends on having access to another software package
(or even a particular version of another software package). For example,
the VASP materials science software may depend on having a particular
version of the FFTW (Fastest Fourier Transform in the West) software
library available for it to work.</p>
<section><h2 class="section-heading" id="environment-modules">Environment Modules<a class="anchor" aria-label="anchor" href="#environment-modules"></a>
</h2>
<hr class="half-width">
<p>Environment modules are the solution to these problems. A
<em>module</em> is a self-contained description of a software package —
it contains the settings required to run a software package and,
usually, encodes required dependencies on other software packages.</p>
<p>There are a number of different environment module implementations
commonly used on HPC systems: the two most common are <em>TCL
modules</em> and <em>Lmod</em>. Both of these use similar syntax and the
concepts are the same so learning to use one will allow you to use
whichever is installed on the system you are using. In both
implementations the <code>module</code> command is used to interact with
environment modules. An additional subcommand is usually added to the
command to specify what you want to do. For a list of subcommands you
can use <code>module -h</code> or <code>module help</code>. As for all
commands, you can access the full help on the <em>man</em> pages with
<code>man module</code>.</p>
<p>On login you may start out with a default set of modules loaded or
you may start out with an empty environment; this depends on the setup
of the system you are using.</p>
<div class="section level3">
<h3 id="listing-available-modules">Listing Available Modules<a class="anchor" aria-label="anchor" href="#listing-available-modules"></a>
</h3>
<p>To see available software modules, use <code>module avail</code>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  module avail</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>------------------------------------------- /mnt/storage/apps/at11.0/share/modules --------------------------------------------
   modulefiles/at11.0-powerpc64le-linux-gnu

---------------------------------------------- /mnt/storage/apps/eb/modules/all -----------------------------------------------
   ABINIT/8.2.2-intel-2017.03-GCC-6.3
   ABINIT/8.4.4-foss-2017b
   ABINIT/8.4.4-intel-2017.03-GCC-6.3
   ABINIT/8.10.1-intel-2018b
   ABINIT/9.4.2-foss-2021b                                          (D)
   ABRicate/1.0.0-gompi-2021a
   AFNI/20160329-intel-2017.03-GCC-6.3-Python-2.7.12
   ALE/1.0.0-foss-2021a
   ANSYS/17.0
   ANSYS/18.1
   ANSYS/19.4
   ANSYS/2020-R2
   ANSYS/2021
   ANSYS/2022-R1
   ANSYS/2024R1                                                     (D)
   ANTLR/2.7.7-GCCcore-11.2.0-Java-11.0.2
   ANTLR/2.7.7-GCCcore-11.3.0-Java-11.0.2                           (D)
   ANTs/2.3.1-foss-2018b-Python-3.6.6
   ANTs/2.3.2-foss-2019b-Python-3.7.4
   ANTs/2.3.5-foss-2021a                                            (D)
</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="listing-currently-loaded-modules">Listing Currently Loaded Modules<a class="anchor" aria-label="anchor" href="#listing-currently-loaded-modules"></a>
</h3>
<p>You can use the <code>module list</code> command to see which modules
you currently have loaded in your environment. If you have no modules
loaded, you will see a message telling you so</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$ module list</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>No modules loaded</code></pre>
</div>
</div>
</section><section><h2 class="section-heading" id="loading-and-unloading-software">Loading and Unloading Software<a class="anchor" aria-label="anchor" href="#loading-and-unloading-software"></a>
</h2>
<hr class="half-width">
<p>To load a software module, use <code>module load</code>. Let’s say we
would like to use the NetCDF utility <code>ncdump</code>.</p>
<p>On login, <code>ncdump</code> is not available. We can test this by
using the <code>which</code> command. <code>which</code> looks for
programs the same way that Bash does, so we can use it to tell us where
a particular piece of software is stored.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ which ncdump</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>which: no ncdump in (/usr/local/maven/bin:/lus/cls01095/work/y07/shared/bolt/0.7/bin:/work/y07/shared/utils/bin:/opt/cray/pe/perftools/20.10.0/bin:/opt/cray/pe/papi/6.0.0.4/bin:/opt/cray/libfabric/1.11.0.0.233/bin:/opt/cray/pe/craype/2.7.2/bin:/opt/cray/pe/cce/10.0.4/cce-clang/x86_64/bin:/opt/cray/pe/cce/10.0.4/binutils/x86_64/x86_64-pc-linux-gnu/bin:/opt/cray/pe/cce/10.0.4/binutils/cross/x86_64-aarch64/aarch64-linux-gnu/../bin:/opt/cray/pe/cce/10.0.4/utils/x86_64/bin:/usr/local/Modules/bin:/usr/local/bin:/usr/bin:/bin:/opt/cray/pe/bin:/usr/lib/mit/bin)</code></pre>
</div>
<p>We can find the <code>ncdump</code> command by using
<code>module load</code>:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  module load cray-hdf5</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  module load cray-netcdf</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="fu">which</span> ncdump</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/opt/cray/pe/netcdf/4.7.4.2/bin/ncdump</code></pre>
</div>
<p>So, what just happened?</p>
<p>To understand the output, first we need to understand the nature of
the <code>$PATH</code> environment variable. <code>$PATH</code> is a
special environment variable that controls where a UNIX system looks for
software. Specifically, <code>$PATH</code> is a list of directories
(separated by <code>:</code>) that the OS searches through for a command
before giving up and telling us it can’t find it. As with all
environment variables we can print it out using <code>echo</code>.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  echo <span class="va">$PATH</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/opt/cray/pe/netcdf/4.7.4.2/bin:/opt/cray/pe/python/3.8.5.0/bin:/lus/cls01095/work/z19/z19/aturner/.local/bin:/lus/cls01095/work/y07/shared/bolt/0.7/bin:/work/y07/shared/utils/bin:/usr/local/maven/bin:/opt/cray/pe/perftools/20.10.0/bin:/opt/cray/pe/papi/6.0.0.4/bin:/opt/cray/libfabric/1.11.0.0.233/bin:/opt/cray/pe/craype/2.7.2/bin:/opt/cray/pe/cce/10.0.4/cce-clang/x86_64/bin:/opt/cray/pe/cce/10.0.4/binutils/x86_64/x86_64-pc-linux-gnu/bin:/opt/cray/pe/cce/10.0.4/binutils/cross/x86_64-aarch64/aarch64-linux-gnu/../bin:/opt/cray/pe/cce/10.0.4/utils/x86_64/bin:/usr/local/Modules/bin:/home/z19/z19/aturner/bin:/usr/local/bin:/usr/bin:/bin:/opt/cray/pe/bin:/usr/lib/mit/bin</code></pre>
</div>
<p>You’ll notice a similarity to the output of the <code>which</code>
command. In this case, there’s only one difference: the different
directory at the beginning. When we ran the <code>module load</code>
command, it added a directory to the beginning of our
<code>$PATH</code>. Let’s examine what’s there:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  ls /opt/cray/pe/netcdf/4.7.4.2/bin</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>nc-config  nccopy  ncdump  ncgen  ncgen3  ncxx4-config  nf-config</code></pre>
</div>
<p>In summary, <code>module load</code> will add software to your
<code>$PATH</code>. <code>module load</code> may also load additional
modules with software dependencies.</p>
<p>To unload a module, use <code>module unload</code> with the relevant
module name.</p>
<div id="unload" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="unload" class="callout-inner">
<h3 class="callout-title">Unload!</h3>
<div class="callout-content">
<p>Confirm you can unload the <code>cray-netcdf</code> module and check
what happens to the <code>PATH</code> environment variable.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="software-versioning">Software versioning<a class="anchor" aria-label="anchor" href="#software-versioning"></a>
</h2>
<hr class="half-width">
<p>So far, we’ve learned how to load and unload software packages. This
is very useful. However, we have not yet addressed the issue of software
versioning. At some point or other, you will run into issues where only
one particular version of some software will be suitable. Perhaps a key
bugfix only happened in a certain version, or version X broke
compatibility with a file format you use. In either of these example
cases, it helps to be very specific about what software is loaded.</p>
<p>Let’s examine the output of <code>module avail</code> more
closely.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  module avail cray-netcdf</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>--------------------------- /opt/cray/pe/modulefiles ---------------------------
cray-netcdf-hdf5parallel/4.7.4.0           cray-netcdf/4.7.4.0
cray-netcdf-hdf5parallel/4.7.4.2(default)  cray-netcdf/4.7.4.2(default)  </code></pre>
</div>
<p>Note that we have two different versions of <code>cray-netcdf</code>
(and also two versions of something else
<code>cray-netcdf-hdf5parallel</code> which match our search).</p>
<div id="using-module-swap" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="using-module-swap" class="callout-inner">
<h3 class="callout-title">Using <code>module swap</code>
</h3>
<div class="callout-content">
<p>Load module <code>cray-netcdf</code> as before. Note that if we do
not specifify a particular version, we load a default version. If we
wish to change versions, we can use
<code>module swap &lt;old-module&gt; &lt;new-module&gt;</code>. Try this
to obtain <code>cray-netcdf/4.7.4.0</code>. Check what has happened to
the location of the <code>ncdump</code> utility.</p>
</div>
</div>
</div>
<div id="using-software-modules-in-scripts" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="using-software-modules-in-scripts" class="callout-inner">
<h3 class="callout-title">Using Software Modules in Scripts</h3>
<div class="callout-content">
<p>Create a job that is able to run <code>ncdump --version</code>.
Running a job is just like logging on to the system (you should not
assume a module loaded on the login node is loaded on a compute
node).</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  nano ncdump-module.sh</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  cat ncdump-module.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>#!/bin/bash
#SBATCH --partition=short
#SBATCH --qos=short
module load epcc-job-env
module load cray-netcdf
ncdump --version</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  srun python-module.sh</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Load software with <code>module load softwareName</code>.”</li>
<li>“Unload software with <code>module purge</code>”</li>
<li>“The module system handles software versioning and package conflicts
for you automatically.”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-50-transferring-files"><p>Content from <a href="50-transferring-files.html">Transferring files with remote computers</a></p>
<hr>
<p>Last updated on 2025-02-14 |

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/episodes/50-transferring-files.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do I transfer files to (and from) the cluster?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>
<code>wget</code> and <code>curl -O</code> download a file from the
internet.</li>
<li>
<code>scp</code> transfers files to and from your computer.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="required-files" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="required-files" class="callout-inner">
<h3 class="callout-title">Required Files</h3>
<div class="callout-content">
<p>The program used in this example can be retrieved using wget or a
browser and copied to the remote.</p>
<p><strong>Using wget</strong>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ wget http://training.researchcomputing.ncl.ac.uk/training-materials/hpc-intro-data.tar.gz</span></code></pre>
</div>
<p><strong>Using a web browser</strong>:</p>
<p><a href="http://training.researchcomputing.ncl.ac.uk/training-materials/hpc-intro-data.tar.gz" class="external-link">http://training.researchcomputing.ncl.ac.uk/training-materials/hpc-intro-data.tar.gz</a></p>
</div>
</div>
</div>
<p>Computing with a remote computer offers very limited use if we cannot
get files to or from the cluster. There are several options for
transferring data between computing resources, from command line options
to GUI programs, which we will cover here.</p>
<section><h2 class="section-heading" id="download-files-from-the-internet">Download Files From the Internet<a class="anchor" aria-label="anchor" href="#download-files-from-the-internet"></a>
</h2>
<hr class="half-width">
<p>One of the most straightforward ways to download files is to use
either <code>curl</code> or <code>wget</code>, one of these is usually
installed in most Linux shells, on Mac OS terminal and in GitBash. Any
file that can be downloaded in your web browser through a direct link
can be downloaded using <code>curl -O</code> or <code>wget</code>. This
is a quick way to download datasets or source code.</p>
<p>The syntax for these commands is:
<code>curl -O https://some/link/to/a/file</code> and
<code>wget https://some/link/to/a/file</code>. Try it out by downloading
some material we’ll use later on, from a terminal on your local
machine.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  curl <span class="at">-O</span> http://training.researchcomputing.ncl.ac.uk/training-materials/hpc-intro-data.tar.gz</span></code></pre>
</div>
<p>or</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  wget http://training.researchcomputing.ncl.ac.uk/training-materials/hpc-intro-data.tar.gz</span></code></pre>
</div>
<div id="tar.gz" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="tar.gz" class="callout-inner">
<h3 class="callout-title">
<code>tar.gz</code>?</h3>
<div class="callout-content">
<p>This is an archive file format, just like <code>.zip</code>, commonly
used and supported by default on Linux, which is the operating system
the majority of HPC cluster machines run. You may also see the extension
<code>.tgz</code>, which is exactly the same. We’ll talk more about
“tarballs,” since “tar-dot-g-z” is a mouthful, later on.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="transferring-single-files-and-folders-with-scp">Transferring Single Files and Folders With <code>scp</code>
<a class="anchor" aria-label="anchor" href="#transferring-single-files-and-folders-with-scp"></a>
</h2>
<hr class="half-width">
<p>To copy a single file to or from the cluster, we can use
<code>scp</code> (“secure copy”). The syntax can be a little complex for
new users, but we’ll break it down.</p>
<p>To <em>upload to</em> another computer:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  scp path/to/local/file.txt userid@rocket.hpc:/path/on/Rocket</span></code></pre>
</div>
<p>To <em>download from</em> another computer:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  scp userid@rocket.hpc:/path/on/Rocket/file.txt path/to/local/</span></code></pre>
</div>
<p>Note that everything after the <code>:</code> is relative to our home
directory on the remote computer. We can leave it at that if we don’t
care where the file goes.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  scp local-file.txt userid@rocket.hpc:</span></code></pre>
</div>
<div id="upload-a-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="upload-a-file" class="callout-inner">
<h3 class="callout-title">Upload a File</h3>
<div class="callout-content">
<p>Copy the file you just downloaded from the Internet to your home
directory on Rocket.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  scp hpc-intro-data.tar.gz userid@rocket.hpc:~/</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="why-not-download-on-rocket-directly" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="why-not-download-on-rocket-directly" class="callout-inner">
<h3 class="callout-title">Why Not Download on Rocket Directly?</h3>
<div class="callout-content">
<p>Some computer clusters are behind firewalls set to only allow
transfers initiated from the <em>outside</em>. This means that the
<code>curl</code> command will fail, as an address outside the firewall
is unreachable from the inside. To get around this, run the
<code>curl</code> or <code>wget</code> command from your local machine
to download the file, then use the <code>scp</code> command (just below
here) to upload it to the cluster.</p>
</div>
</div>
</div>
<div id="can-you-download-from-the-server-directly" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="can-you-download-from-the-server-directly" class="callout-inner">
<h3 class="callout-title">Can you download from the server directly?</h3>
<div class="callout-content">
<p>Try downloading the file directly using <code>curl</code> or
<code>wget</code>. Do the commands understand file locations on your
local machine over SSH? Note that it may well fail, and that’s OK!</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Using <code>curl</code> or <code>wget</code> commands like the
following:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  ssh userid@rocket.hpc</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ curl <span class="at">-O</span> http://training.researchcomputing.ncl.ac.uk/training-materials/hpc-intro-data.tar.gz</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="ex">or</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ wget http://training.researchcomputing.ncl.ac.uk/training-materials/hpc-intro-data.tar.gz</span></code></pre>
</div>
<p>Did it work? If not, what does the terminal output tell you about
what happened?</p>
</div>
</div>
</div>
</div>
<p>To copy a whole directory, we add the <code>-r</code> flag, for
“<strong>r</strong>ecursive”: copy the item specified, and every item
below it, and every item below those… until it reaches the bottom of the
directory tree rooted at the folder name you provided.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  scp <span class="at">-r</span> some-local-folder userid@rocket.hpc:target-directory/</span></code></pre>
</div>
<div id="caution" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="caution" class="callout-inner">
<h3 class="callout-title">Caution</h3>
<div class="callout-content">
<p>For a large directory — either in size or number of files — copying
with <code>-r</code> can take a long time to complete.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="whats-in-a">What’s in a <code>/</code>?<a class="anchor" aria-label="anchor" href="#whats-in-a"></a>
</h2>
<hr class="half-width">
<p>When using <code>scp</code>, you may have noticed that a
<code>:</code> <em>always</em> follows the remote computer name;
sometimes a <code>/</code> follows that, and sometimes not, and
sometimes there’s a final <code>/</code>. On Linux computers,
<code>/</code> is the <strong><em>root</em></strong> directory, the
location where the entire filesystem (and others attached to it) is
anchored. A path starting with a <code>/</code> is called
<em>absolute</em>, since there can be nothing above the root
<code>/</code>. A path that does not start with <code>/</code> is called
<em>relative</em>, since it is not anchored to the root.</p>
<p>If you want to upload a file to a location inside your home directory
— which is often the case — then you don’t need a leading
<code>/</code>. After the <code>:</code>, start writing the sequence of
folders that lead to the final storage location for the file or, as
mentioned above, provide nothing if your home directory <em>is</em> the
destination.</p>
<p>A trailing slash on the target directory is optional, and has no
effect for <code>scp -r</code>, but is important in other commands, like
<code>rsync</code>.</p>
<div id="a-note-on-rsync" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="a-note-on-rsync" class="callout-inner">
<h3 class="callout-title">A Note on <code>rsync</code>
</h3>
<div class="callout-content">
<p>As you gain experience with transferring files, you may find the
<code>scp</code> command limiting. The <a href="https://rsync.samba.org/" class="external-link">rsync</a> utility provides advanced
features for file transfer and is typically faster compared to both
<code>scp</code> and <code>sftp</code> (see below). It is especially
useful for transferring large and/or many files and creating synced
backup folders. The syntax is similar to <code>scp</code>. To transfer
<em>to</em> another computer with commonly used options:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  rsync <span class="at">-avzP</span> path/to/local/file.txt userid@rocket.hpc:directory/path/on/Rocket/</span></code></pre>
</div>
<p>The <code>a</code> (archive) option preserves file timestamps and
permissions among other things; the <code>v</code> (verbose) option
gives verbose output to help monitor the transfer; the <code>z</code>
(compression) option compresses the file during transit to reduce size
and transfer time; and the <code>P</code> (partial/progress) option
preserves partially transferred files in case of an interruption and
also displays the progress of the transfer.</p>
<p>To recursively copy a directory, we can use the same options:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  rsync <span class="at">-avzP</span> path/to/local/dir userid@rocket.hpc:directory/path/on/Rocket/</span></code></pre>
</div>
<p>As written, this will place the local directory and its contents
under the specified directory on the remote system. If the trailing
slash is omitted on the destination, a new directory corresponding to
the transferred directory (‘dir’ in the example) will not be created,
and the contents of the source directory will be copied directly into
the destination directory.</p>
<p>The <code>a</code> (archive) option implies recursion.</p>
<p>To download a file, we simply change the source and destination:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  rsync <span class="at">-avzP</span> userid@rocket.hpc:path/on/Rocket/file.txt path/to/local/</span></code></pre>
</div>
</div>
</div>
</div>
<div id="a-note-on-ports" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="a-note-on-ports" class="callout-inner">
<h3 class="callout-title">A Note on Ports</h3>
<div class="callout-content">
<p>All file transfers using the above methods use SSH to encrypt data
sent through the network. So, if you can connect via SSH, you will be
able to transfer files. By default, SSH uses network port 22. If a
custom SSH port is in use, you will have to specify it using the
appropriate flag, often <code>-p</code>, <code>-P</code>, or
<code>--port</code>. Check <code>--help</code> or the <code>man</code>
page if you’re unsure.</p>
</div>
</div>
</div>
<div id="rsync-port" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="rsync-port" class="callout-inner">
<h3 class="callout-title">Rsync Port</h3>
<div class="callout-content">
<p>Say we have to connect <code>rsync</code> through port 768 instead of
22. How would we modify this command?</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  rsync test.txt userid@rocket.hpc:</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  rsync <span class="at">--help</span> <span class="kw">|</span> <span class="fu">grep</span> port</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>     <span class="ex">--port=PORT</span>             specify double-colon alternate port number</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="ex">See</span> https://rsync.samba.org/ for updates, bug reports, and answers</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  rsync <span class="at">--port</span><span class="op">=</span>768 test.txt userid@rocket.hpc:</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="archiving-files">Archiving Files<a class="anchor" aria-label="anchor" href="#archiving-files"></a>
</h2>
<hr class="half-width">
<p>One of the biggest challenges we often face when transferring data
between remote HPC systems is that of large numbers of files. There is
an overhead to transferring each individual file and when we are
transferring large numbers of files these overheads combine to slow down
our transfers to a large degree.</p>
<p>The solution to this problem is to <em>archive</em> multiple files
into smaller numbers of larger files before we transfer the data to
improve our transfer efficiency. Sometimes we will combine archiving
with <em>compression</em> to reduce the amount of data we have to
transfer and so speed up the transfer.</p>
<p>The most common archiving command you will use on a (Linux) HPC
cluster is <code>tar</code>. <code>tar</code> can be used to combine
files into a single archive file and, optionally, compress it.</p>
<p>Let’s start with the file we downloaded from the lesson site,
<code>hpc-lesson-data.tar.gz</code>. The “gz” part stands for
<em>gzip</em>, which is a compression library. Reading this file name,
it appears somebody took a folder named “hpc-lesson-data,” wrapped up
all its contents in a single file with <code>tar</code>, then compressed
that archive with <code>gzip</code> to save space. Let’s check using
<code>tar</code> with the <code>-t</code> flag, which prints the
“<strong>t</strong>able of contents” without unpacking the file,
specified by <code>-f &lt;filename&gt;</code>, on the remote computer.
Note that you can concatenate the two flags, instead of writing
<code>-t -f</code> separately.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  ssh userid@rocket.hpc</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ tar <span class="at">-tf</span> hpc-lesson-data.tar.gz</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="ex">hpc-intro-data/</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01971Z.txt</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/goostats</span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/goodiff</span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE02040B.txt</span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01978B.txt</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE02043B.txt</span></span>
<span id="cb15-11"><a href="#cb15-11" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE02018B.txt</span></span>
<span id="cb15-12"><a href="#cb15-12" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01843A.txt</span></span>
<span id="cb15-13"><a href="#cb15-13" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01978A.txt</span></span>
<span id="cb15-14"><a href="#cb15-14" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01751B.txt</span></span>
<span id="cb15-15"><a href="#cb15-15" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01736A.txt</span></span>
<span id="cb15-16"><a href="#cb15-16" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01812A.txt</span></span>
<span id="cb15-17"><a href="#cb15-17" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE02043A.txt</span></span>
<span id="cb15-18"><a href="#cb15-18" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01729B.txt</span></span>
<span id="cb15-19"><a href="#cb15-19" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE02040A.txt</span></span>
<span id="cb15-20"><a href="#cb15-20" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01843B.txt</span></span>
<span id="cb15-21"><a href="#cb15-21" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01751A.txt</span></span>
<span id="cb15-22"><a href="#cb15-22" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE01729A.txt</span></span>
<span id="cb15-23"><a href="#cb15-23" tabindex="-1"></a><span class="ex">hpc-intro-data/north-pacific-gyre/NENE02040Z.txt</span></span></code></pre>
</div>
<p>This shows a folder containing another folder, which contains a bunch
of files. If you’ve taken The Carpentries’ Shell lesson recently, these
might look familiar. Let’s see about that compression, using
<code>du</code> for “<strong>d</strong>isk <strong>u</strong>sage”.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ du <span class="at">-sh</span> hpc-lesson-data.tar.gz</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="ex">36K</span>     hpc-intro-data.tar.gz</span></code></pre>
</div>
<div id="files-occupy-at-least-one-block" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="files-occupy-at-least-one-block" class="callout-inner">
<h3 class="callout-title">Files Occupy at Least One “Block”</h3>
<div class="callout-content">
<p>If the filesystem block size is larger than 36 KB, you’ll see a
larger number: files cannot be smaller than one block.</p>
</div>
</div>
</div>
<p>Now let’s unpack the archive. We’ll run <code>tar</code> with a few
common flags:</p>
<ul>
<li>
<code>-x</code> to e<strong>x</strong>tract the archive</li>
<li>
<code>-v</code> for <strong>v</strong>erbose output</li>
<li>
<code>-z</code> for g<strong>z</strong>ip compression</li>
<li>
<code>-f</code> for the file to be unpacked</li>
</ul>
<p>When it’s done, check the directory size with <code>du</code> and
compare.</p>
<div id="extract-the-archive" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="extract-the-archive" class="callout-inner">
<h3 class="callout-title">Extract the Archive</h3>
<div class="callout-content">
<p>Using the four flags above, unpack the lesson data using
<code>tar</code>. Then, check the size of the whole unpacked directory
using <code>du</code>. Hint: <code>tar</code> lets you concatenate
flags.</p>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Commands </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ tar <span class="at">-xvzf</span> hpc-lesson-data.tar.gz</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01971Z.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">goostats</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">goodiff</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE02040B.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01978B.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE02043B.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE02018B.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01843A.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01978A.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01751B.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01812A.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE02043A.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE02040A.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01843B.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01751A.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">hpc</span><span class="op">-</span><span class="va">intro</span><span class="op">-</span><span class="va">data</span><span class="op">/</span><span class="va">north</span><span class="op">-</span><span class="va">pacific</span><span class="op">-</span><span class="va">gyre</span><span class="op">/</span><span class="va">NENE02040Z.txt</span></span></code></pre>
</div>
<p>Note that we did not type out <code>-x -v -z -f</code>, thanks to the
flag concatenation, though the command works identically either way.</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="ex">[userid@login01</span> ~]$ du <span class="at">-sh</span> hpc-lesson-data</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="ex">144K</span>    hpc-intro-data</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="was-the-data-compressed" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="was-the-data-compressed" class="callout-inner">
<h3 class="callout-title">Was the Data Compressed?</h3>
<div class="callout-content">
<p>Text files compress nicely: the “tarball” is one-quarter the total
size of the raw data!</p>
</div>
</div>
</div>
<p>If you want to reverse the process — compressing raw data instead of
extracting it — set a <code>c</code> flag instead of <code>x</code>, set
the archive filename, then provide a directory to compress:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$  tar <span class="at">-cvzf</span> compressed_data.tar.gz hpc-intro-data</span></code></pre>
</div>
<div id="working-with-windows" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="working-with-windows" class="callout-inner">
<h3 class="callout-title">Working with Windows</h3>
<div class="callout-content">
<p>When you transfer text files to from a Windows system to a Unix
system (Mac, Linux, BSD, Solaris, etc.) this can cause problems. Windows
encodes its files slightly different than Unix, and adds an extra
character to every line. On a Unix system, every line in a file ends
with a <code>\n</code> (newline). On Windows, every line in a file ends
with a <code>\r\n</code> (carriage return + newline). This causes
problems sometimes. Though most modern programming languages and
software handles this correctly, in some rare instances, you may run
into an issue. The solution is to convert a file from Windows to Unix
encoding with the <code>dos2unix</code> command. You can identify if a
file has Windows line endings with <code>cat -A filename</code>. A file
with Windows line endings will have <code>^M$</code> at the end of every
line. A file with Unix line endings will have <code>$</code> at the end
of a line. To convert the file, just run <code>dos2unix filename</code>.
(Conversely, to convert back to Windows format, you can run
<code>unix2dos filename</code>.)</p>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“<code>wget</code> and <code>curl -O</code> download a file from the
internet.”</li>
<li>“<code>scp</code> transfers files to and from your computer.”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-70-resources"><p>Content from <a href="70-resources.html">Using resources effectively</a></p>
<hr>
<p>Last updated on 2025-02-14 |

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/episodes/70-resources.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we monitor our jobs?</li>
<li>How can I get my jobs scheduled more easily?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Understand how to look up job statistics and profile code.</li>
<li>Understand job size implications.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We’ve touched on all the skills you need to interact with an HPC
cluster: logging in over SSH, loading software modules, submitting
parallel jobs, and finding the output. Let’s learn about estimating
resource usage and why it might matter. To do this we need to understand
the basics of <em>benchmarking</em>. Benchmarking is essentially
performing simple experiments to help understand how the performance of
our work varies as we change the properties of the jobs on the cluster -
including input parameters, job options and resources used.</p>
<div id="our-example" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<div id="our-example" class="callout-inner">
<h3 class="callout-title">Our example</h3>
<div class="callout-content">
<p>In the rest of this episode, we will use an example parallel
application that calculates an estimate of the value of Pi. Although
this is a toy problem, it exhibits all the properties of a full parallel
application that we are interested in for this course.</p>
<p>The main resource we will consider here is the use of compute core
time as this is the resource you are usually charged for on HPC
resources. However, other resources - such as memory use - may also have
a bearing on how you choose resources and constrain your choice.</p>
<p>For those that have come across HPC benchmarking before, you may be
aware that people often make a distinction between <em>strong
scaling</em> and <em>weak scaling</em>:</p>
<ul>
<li>Strong scaling is where the problem size (i.e. the
<em>application</em>) stays the same size and we try to use more cores
to solve the problem faster.</li>
<li>Weak scaling is where the problem size increases at the same rate as
we increase the core count so we are using more cores to solve a larger
problem.</li>
</ul>
<p>Both of these approaches are equally valid uses of HPC. This example
looks at strong scaling.</p>
</div>
</div>
</div>
<p>Before we work on benchmarking, it is useful to define some terms for
the example we will be using</p>
<ul>
<li>
<strong>Program</strong> The computer program we are executing
(<code>pi-mpi.py</code> in the examples below)</li>
<li>
<strong>Application</strong> The combination of computer program
with particular input parameters</li>
</ul>
<section><h2 class="section-heading" id="accessing-the-software-and-input">Accessing the software and input<a class="anchor" aria-label="anchor" href="#accessing-the-software-and-input"></a>
</h2>
<hr class="half-width">
<div id="required-files" class="callout prereq">
<div class="callout-square">
<i class="callout-icon" data-feather="check"></i>
</div>
<div id="required-files" class="callout-inner">
<h3 class="callout-title">Required Files</h3>
<div class="callout-content">
<p>The program used in this example can be retrieved using wget or a
browser and copied to the remote.</p>
<p><strong>Using wget</strong>:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">[username3@login02</span> ]$ wget http://training.researchcomputing.ncl.ac.uk/training-materials/pi-mpi.py</span></code></pre>
</div>
<p><strong>Using a web browser</strong>:</p>
<p><a href="http://training.researchcomputing.ncl.ac.uk/training-materials/pi-mpi.py" class="external-link">http://training.researchcomputing.ncl.ac.uk/training-materials/pi-mpi.py</a></p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="baseline-running-in-serial">Baseline: running in serial<a class="anchor" aria-label="anchor" href="#baseline-running-in-serial"></a>
</h2>
<hr class="half-width">
<p>Before starting to benchmark an application to understand what
resources are best to use, you need a <em>baseline</em> performance
result. In more formal benchmarking, your baseline is usually the
minimum number of cores or nodes you can run on. However, for
understanding how best to use resources, as we are doing here, your
baseline could be the performance on any number of cores or nodes that
you can measure the change in performance from.</p>
<p>Our <code>pi-mpi.py</code> application is small enough that we can
run a serial (i.e. using a single core) job for our baseline performance
so that is where we will start</p>
<div id="run-a-single-core-job" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="run-a-single-core-job" class="callout-inner">
<h3 class="callout-title">Run a single core job</h3>
<div class="callout-content">
<p>Write a job submission script that runs the <code>pi-mpi.py</code>
application on a single core. You will need to take an initial guess as
to the walltime to request to give the job time to complete. Submit the
job and check the contents of the STDOUT file to see if the application
worked or not.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Creating a file called <code>submit-pi-mpi.slurm</code>:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co">#SBATCH --partition=short</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#SBATCH --job-name=pi-mpi</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co">#SBATCH --nodes=1</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="co">#SBATCH --tasks-per-node=1</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="co">#SBATCH --time=00:15:00</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a><span class="ex">srun</span> python pi-mpi.py 10000000</span></code></pre>
</div>
<p>Run application using a single process (i.e. in serial) with a
blocking <code>srun</code> command:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">module</span> load cray-python</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  srun <span class="at">--partition</span><span class="op">=</span>short python pi-mpi.py 10000000</span></code></pre>
</div>
<p>Submit with to the batch queue with:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  srun submit-pi-mpi.slurm</span></code></pre>
</div>
<p>Output in the job log should look something like:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Generating 10000000 samples.
Rank 0 generating 10000000 samples on host nid001246.
Numpy Pi:  3.141592653589793
My Estimate of Pi:  3.1416708
1 core(s), 10000000 samples, 228.881836 MiB memory, 0.423903 seconds, -0.002487% error</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>Once your job has run, you should look in the output to identify the
performance. Most HPC programs should print out timing or performance
information (usually somewhere near the bottom of the summary output)
and <code>pi-mpi.py</code> is no exception. You should see two lines in
the output that look something like:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">256</span> core<span class="er">(</span><span class="ex">s</span><span class="kw">)</span><span class="ex">,</span> 100000000 samples, 2288.818359 MiB memory, 0.135041 seconds, <span class="at">-0.004774%</span> error</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="ex">Total</span> run time=0.18654435999997077s</span></code></pre>
</div>
<p>You can also get an estimate of the overall run time from the final
job statistics. If we look at how long the finished job ran for, this
will provide a quick way to see roughly what the runtime was. This can
be useful if you want to know quickly if a job was faster or not than a
previous job (as you do not have to find the output file to look up the
performance) but the number is not as accurate as the performance
recorded by the application itself and also includes static overheads
from running the job (such as loading modules and startup time) that can
skew the timings. To do this on use <code>sacct -l -j 12345</code> with
the job ID, e.g.:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">[userid@login01</span> userid]$  sacct <span class="at">-l</span> <span class="at">-j</span> 12345</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>JOBID USER         ACCOUNT     NAME           ST REASON START_TIME         T...
36856 yourUsername yourAccount example-job.sh R  None   2017-07-01T16:47:02 ...</code></pre>
</div>
</section><section><h2 class="section-heading" id="running-in-parallel-and-benchmarking-performance">Running in parallel and benchmarking performance<a class="anchor" aria-label="anchor" href="#running-in-parallel-and-benchmarking-performance"></a>
</h2>
<hr class="half-width">
<p>We have now managed to run the <code>pi-mpi.py</code> application
using a single core and have a baseline performance we can use to judge
how well we are using resources on the system.</p>
<p>Note that we also now have a good estimate of how long the
application takes to run so we can provide a better setting for the
walltime for future jobs we submit. Lets now look at how the runtime
varies with core count.</p>
<div id="benchmarking-the-parallel-performance" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="benchmarking-the-parallel-performance" class="callout-inner">
<h3 class="callout-title">Benchmarking the parallel performance</h3>
<div class="callout-content">
<p>Modify your job script to run on multiple cores and evaluate the
performance of <code>pi-mpi.py</code> on a variety of different core
counts and use multiple runs to complete a table like the one below. If
you examine the log file you will see that it contains two timings: the
total time taken by the entire program and the time taken solely by the
calculation. The calculation of Pi from the Monte-Carlo counts is not
parallelised so this is a serial overhead, performed by a single
processor. The calculation part is, in theory, perfectly parallel (each
processor operates on independent sets of unique random numbers ) so
this should get faster on more cores. The Calculation core seconds is
the <em>calculation time</em> multiplied by the number of cores.</p>
<table class="table">
<colgroup>
<col width="14%">
<col width="26%">
<col width="26%">
<col width="31%">
</colgroup>
<thead><tr class="header">
<th>Cores</th>
<th>Overall run time (s)</th>
<th>Calculation time (s)</th>
<th>Calculation core seconds</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1 (serial)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>2</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>4</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>8</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>16</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>32</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>64</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>128</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>256</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Look at your results – do they make sense? Given the structure of the
code, you would expect the performance of the calculation to increase
linearly with the number of cores: this would give a roughly constant
figure for the Calculation core seconds. Is this what you observe?</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>The table below shows example timings for runs on ARCHER2 (HPC at
Edinburgh)</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="25%">
<col width="25%">
<col width="36%">
</colgroup>
<thead><tr class="header">
<th align="right">Cores</th>
<th align="right">Overall run time (s)</th>
<th align="right">Calculation time (s)</th>
<th align="right">Calculation core seconds</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">3.931</td>
<td align="right">3.854</td>
<td align="right">3.854</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2.002</td>
<td align="right">1.930</td>
<td align="right">3.859</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">1.048</td>
<td align="right">0.972</td>
<td align="right">3.888</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">0.572</td>
<td align="right">0.495</td>
<td align="right">3.958</td>
</tr>
<tr class="odd">
<td align="right">16</td>
<td align="right">0.613</td>
<td align="right">0.536</td>
<td align="right">8.574</td>
</tr>
<tr class="even">
<td align="right">32</td>
<td align="right">0.360</td>
<td align="right">0.278</td>
<td align="right">8.880</td>
</tr>
<tr class="odd">
<td align="right">64</td>
<td align="right">0.249</td>
<td align="right">0.163</td>
<td align="right">10.400</td>
</tr>
<tr class="even">
<td align="right">128</td>
<td align="right">0.170</td>
<td align="right">0.083</td>
<td align="right">10.624</td>
</tr>
<tr class="odd">
<td align="right">256</td>
<td align="right">0.187</td>
<td align="right">0.135</td>
<td align="right">34.560</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="understanding-the-performance">Understanding the performance<a class="anchor" aria-label="anchor" href="#understanding-the-performance"></a>
</h2>
<hr class="half-width">
<p>Now we have some data showing the performance of our application we
need to try and draw some useful conclusions as to what the most
efficient set of resources are to use for our jobs. To do this we
introduce two metrics:</p>
<ul>
<li>
<strong>Actual speedup</strong> The ratio of the baseline runtime
(or runtime on the lowest core count) to the runtime at the specified
core count. i.e. baseline runtime divided by runtime at the specified
core count.</li>
<li>
<strong>Ideal speedup</strong> The expected speedup if the
application showed perfect scaling. i.e. if you double the number of
cores, the application should run twice as fast.</li>
<li>
<strong>Parallel efficiency</strong> The fraction of <em>ideal
speedup</em> actually obtained for a given core count. This gives an
indication of how well you are exploiting the additional resources you
are using.</li>
</ul>
<p>We will now use our performance results to compute these two metrics
for the sharpen application and use the metrics to evaluate the
performance and make some decisions about the most effective use of
resources.</p>
<div id="computing-the-speedup-and-parallel-efficiency" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="computing-the-speedup-and-parallel-efficiency" class="callout-inner">
<h3 class="callout-title">Computing the speedup and parallel efficiency</h3>
<div class="callout-content">
<p>Use your <em>Overall run times</em> from above to fill in a table
like the one below.</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="25%">
<col width="19%">
<col width="18%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th>Cores</th>
<th>Overall run time (s)</th>
<th>Actual speedup</th>
<th>Ideal speedup</th>
<th>Parallel efficiency</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1 (serial)</td>
<td><span class="math inline">\(t_{c1}\)</span></td>
<td>-</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="even">
<td>2</td>
<td><span class="math inline">\(t_{c2}\)</span></td>
<td><span class="math inline">\(s_2 = t_{c1}/t_{c2}\)</span></td>
<td><span class="math inline">\(i_2 = 2\)</span></td>
<td><span class="math inline">\(s_2 / i_2\)</span></td>
</tr>
<tr class="odd">
<td>4</td>
<td><span class="math inline">\(t_{c4}\)</span></td>
<td><span class="math inline">\(s_4 = t_{c1}/t_{c4}\)</span></td>
<td><span class="math inline">\(i_4 = 4\)</span></td>
<td><span class="math inline">\(s_4 / i_4\)</span></td>
</tr>
<tr class="even">
<td>8</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>16</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>32</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>64</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>128</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>256</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Given your results, try to answer the following questions:</p>
<ol style="list-style-type: decimal">
<li>What is the core count where you get the <strong>most</strong>
efficient use of resources, irrespective of run time?</li>
<li>What is the core count where you get the fastest solution,
irrespective of efficiency?</li>
<li>What do you think a good core count choice would be for this
application that balances time to solution and efficiency? Why did you
choose this option?</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>The table below gives example results for ARCHER2 (HPC at Edinburgh)
based on the example runtimes given in the solution above.</p>
<table class="table">
<colgroup>
<col width="13%">
<col width="25%">
<col width="18%">
<col width="17%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="right">Cores</th>
<th align="right">Overall run time (s)</th>
<th align="right">Actual speedup</th>
<th align="right">Ideal speedup</th>
<th align="right">Parallel efficiency</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">3.931</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">2.002</td>
<td align="right">1.963</td>
<td align="right">2.000</td>
<td align="right">0.982</td>
</tr>
<tr class="odd">
<td align="right">4</td>
<td align="right">1.048</td>
<td align="right">3.751</td>
<td align="right">4.000</td>
<td align="right">0.938</td>
</tr>
<tr class="even">
<td align="right">8</td>
<td align="right">0.572</td>
<td align="right">6.872</td>
<td align="right">8.000</td>
<td align="right">0.859</td>
</tr>
<tr class="odd">
<td align="right">16</td>
<td align="right">0.613</td>
<td align="right">6.408</td>
<td align="right">16.000</td>
<td align="right">0.401</td>
</tr>
<tr class="even">
<td align="right">32</td>
<td align="right">0.360</td>
<td align="right">10.928</td>
<td align="right">32.000</td>
<td align="right">0.342</td>
</tr>
<tr class="odd">
<td align="right">64</td>
<td align="right">0.249</td>
<td align="right">15.767</td>
<td align="right">64.000</td>
<td align="right">0.246</td>
</tr>
<tr class="even">
<td align="right">128</td>
<td align="right">0.170</td>
<td align="right">23.122</td>
<td align="right">128.000</td>
<td align="right">0.181</td>
</tr>
<tr class="odd">
<td align="right">256</td>
<td align="right">0.187</td>
<td align="right">21.077</td>
<td align="right">256.000</td>
<td align="right">0.082</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="what-is-the-core-count-where-you-get-the-most-efficient-use-of-resources">What is the core count where you get the <strong>most</strong>
efficient use of resources?<a class="anchor" aria-label="anchor" href="#what-is-the-core-count-where-you-get-the-most-efficient-use-of-resources"></a>
</h3>
<p>Just using a single core is the cheapest (and always will be unless
your speedup is better than perfect – “super-linear” speedup). However,
it may not be possible to run on small numbers of cores depending on how
much memory you need or other technical constraints.
<strong>Note:</strong> on most high-end systems, nodes are not shared
between users. This means you are charged for all the CPU-cores on a
node regardless of whether you actually use them. Typically we would be
running on many hundreds of CPU-cores not a few tens, so the real
question in practice is: what is the optimal number of nodes to use? ###
What is the core count where you get the fastest solution, irrespective
of efficiency? 256 cores gives the fastest time to solution. The fastest
time to solution does not often make the most efficient use of resources
so to use this option, you may end up wasting your resources. Sometimes,
when there is time pressure to run the calculations, this may be a valid
approach to running applications. ### What do you think a good core
count choice would be for this application to use?</p>
<p>8 cores is probably a good number of cores to use with a parallel
efficiency of 86%. Usually, the best choice is one that delivers good
parallel efficiency with an acceptable time to solution. Note that
<em>acceptable time to solution</em> differs depending on circumstances
so this is something that the individual researcher will have to assess.
Good parallel efficiency is often considered to be 70% or greater though
many researchers will be happy to run in a regime with parallel
efficiency greater than 60%. As noted above, running with worse parallel
efficiency may also be useful if the time to solution is an overriding
factor.</p>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="tips">Tips<a class="anchor" aria-label="anchor" href="#tips"></a>
</h2>
<hr class="half-width">
<p>Here are a few tips to help you use resources effectively and
efficiently on HPC systems:</p>
<ul>
<li>Know what your priority is: do you want the results as fast as
possible or are you happy to wait longer but get more research for the
resources you have been allocated?</li>
<li>Use your real research application to benchmark but try to shorten
the run so you can turn around your benchmarking runs in a short
timescale. Ideally, it should run for 10-30 minutes; short enough to run
quickly but long enough so the performance is not dominated by static
startup overheads (though this is application dependent). Ways to do
this potentially include, for example: using a smaller number of time
steps, restricting the number of SCF cycles, restricting the number of
optimisation steps.</li>
<li>Use basic benchmarking to help define the best resource use for your
application. One useful strategy: take the core count you are using as
the baseline, halve the number of cores/nodes and rerun and then double
the number of cores/nodes from your baseline and rerun. Use the three
data points to assess your efficiency and the impact of different
core/node counts.</li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“The smaller your job, the faster it will schedule.”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-80-responsibility"><p>Content from <a href="80-responsibility.html">Using shared resources responsibly</a></p>
<hr>
<p>Last updated on 2025-02-14 |

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/episodes/80-responsibility.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I be a responsible user?</li>
<li>How can I protect my data?</li>
<li>How can I best get large amounts of data off an HPC system?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn how to be a considerate shared system citizen.</li>
<li>Understand how to protect your critical data.</li>
<li>Appreciate the challenges with transferring large amounts of data
off HPC systems.</li>
<li>Understand how to convert many files to a single archive file using
tar.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>One of the major differences between using remote HPC resources and
your own system (e.g. your laptop) is that remote resources are shared.
How many users the resource is shared between at any one time varies
from system to system but it is unlikely you will ever be the only user
logged into or using such a system.</p>
<p>The widespread usage of scheduling systems where users submit jobs on
HPC resources is a natural outcome of the shared nature of these
resources. There are other things you, as an upstanding member of the
community, need to consider.</p>
<section><h2 class="section-heading" id="be-kind-to-the-login-nodes">Be Kind to the Login Nodes<a class="anchor" aria-label="anchor" href="#be-kind-to-the-login-nodes"></a>
</h2>
<hr class="half-width">
<p>The login node is often busy managing all of the logged in users,
creating and editing files and compiling software. If the machine runs
out of memory or processing capacity, it will become very slow and
unusable for everyone. While the machine is meant to be used, be sure to
do so responsibly — in ways that will not adversely impact other users’
experience.</p>
<p>Login nodes are always the right place to launch jobs. Cluster
policies vary, but they may also be used for proving out workflows, and
in some cases, may host advanced cluster-specific debugging or
development tools. The cluster may have modules that need to be loaded,
possibly in a certain order, and paths or library versions that differ
from your laptop, and doing an interactive test run on the head node is
a quick and reliable way to discover and fix these issues.</p>
<div id="login-nodes-are-a-shared-resource" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="login-nodes-are-a-shared-resource" class="callout-inner">
<h3 class="callout-title">Login Nodes Are a Shared Resource</h3>
<div class="callout-content">
<p>Remember, the login node is shared with all other users and your
actions could cause issues for other people. Think carefully about the
potential implications of issuing commands that may use large amounts of
resource.</p>
<p>Unsure? Ask your friendly systems administrator (“sysadmin”) or
service desk if the thing you’re contemplating is suitable for the login
node, or if there’s another mechanism to get it done safely.</p>
<p>You can contact the ARCHER2 Service Desk at <a href="mailto:support@archer2.ac.uk">support@archer2.ac.uk</a></p>
</div>
</div>
</div>
<p>You can always use the commands <code>top</code> and
<code>ps ux</code> to list the processes that are running on the login
node along with the amount of CPU and memory they are using. If this
check reveals that the login node is somewhat idle, you can safely use
it for your non-routine processing task. If something goes wrong — the
process takes too long, or doesn’t respond — you can use the
<code>kill</code> command along with the <em>PID</em> to terminate the
process.</p>
<div id="login-node-etiquette" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="login-node-etiquette" class="callout-inner">
<h3 class="callout-title">Login Node Etiquette</h3>
<div class="callout-content">
<p>Which of these commands would be a routine task to run on the login
node?</p>
<ol style="list-style-type: decimal">
<li><code>python physics_sim.py</code></li>
<li><code>make</code></li>
<li><code>create_directories.sh</code></li>
<li><code>molecular_dynamics_2</code></li>
<li><code>tar -xzf R-3.3.0.tar.gz</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>Building software, creating directories, and unpacking software are
common and acceptable tasks for the login node: options #2
(<code>make</code>), #3 (<code>mkdir</code>), and #5 (<code>tar</code>)
are probably OK. Note that script names do not always reflect their
contents: before launching #3, please
<code>less create_directories.sh</code> and make sure it’s not a Trojan
horse. Running resource-intensive applications is frowned upon. Unless
you are sure it will not affect other users, do not run jobs like #1
(<code>python</code>) or #4 (custom MD code). If you’re unsure, ask your
friendly sysadmin for advice.</p>
</div>
</div>
</div>
</div>
<p>If you experience performance issues with a login node you should
report it to the system staff (usually via the helpdesk) for them to
investigate.</p>
</section><section><h2 class="section-heading" id="test-before-scaling">Test Before Scaling<a class="anchor" aria-label="anchor" href="#test-before-scaling"></a>
</h2>
<hr class="half-width">
<p>Remember that you are generally charged for usage on shared systems.
A simple mistake in a job script can end up costing a large amount of
resource budget. Imagine a job script with a mistake that makes it sit
doing nothing for 24 hours on 1000 cores or one where you have requested
2000 cores by mistake and only use 100 of them! This problem can be
compounded when people write scripts that automate job submission (for
example, when running the same calculation or analysis over lots of
different parameters or files). When this happens it hurts both you (as
you waste lots of charged resource) and other users (who are blocked
from accessing the idle compute nodes).</p>
<p>On very busy resources you may wait many days in a queue for your job
to fail within 10 seconds of starting due to a trivial typo in the job
script. This is extremely frustrating! Most systems provide dedicated
resources for testing that have short wait times to help you avoid this
issue.</p>
<div id="test-job-submission-scripts-that-use-large-amounts-of-resources" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="test-job-submission-scripts-that-use-large-amounts-of-resources" class="callout-inner">
<h3 class="callout-title">Test Job Submission Scripts That Use Large Amounts of Resources</h3>
<div class="callout-content">
<p>Before submitting a large run of jobs, submit one as a test first to
make sure everything works as expected.</p>
<p>Before submitting a very large or very long job submit a short
truncated test to ensure that the job starts as expected.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="have-a-backup-plan">Have a Backup Plan<a class="anchor" aria-label="anchor" href="#have-a-backup-plan"></a>
</h2>
<hr class="half-width">
<p>Although many HPC systems keep backups, it does not always cover all
the file systems available and may only be for disaster recovery
purposes (<em>i.e.</em> for restoring the whole file system if lost
rather than an individual file or directory you have deleted by
mistake). Protecting critical data from corruption or deletion is
primarily your responsibility: keep your own backup copies.</p>
<p>Version control systems (such as Git) often have free, cloud-based
offerings (e.g., GitHub and GitLab) that are generally used for storing
source code. Even if you are not writing your own programs, these can be
very useful for storing job scripts, analysis scripts and small input
files.</p>
<p>For larger amounts of data, you should make sure you have a robust
system in place for taking copies of critical data off the HPC system
wherever possible to backed-up storage. Tools such as <code>rsync</code>
can be very useful for this.</p>
<p>Your access to the shared HPC system will generally be time-limited
so you should ensure you have a plan for transferring your data off the
system before your access finishes. The time required to transfer large
amounts of data should not be underestimated and you should ensure you
have planned for this early enough (ideally, before you even start using
the system for your research).</p>
<p>In all these cases, the service desk of the system you are using
should be able to provide useful guidance on your options for data
transfer for the volumes of data you will be using.</p>
<div id="your-data-is-your-responsibility" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="your-data-is-your-responsibility" class="callout-inner">
<h3 class="callout-title">Your Data Is Your Responsibility</h3>
<div class="callout-content">
<p>Make sure you understand what the backup policy is on the file
systems on the system you are using and what implications this has for
your work if you lose your data on the system. Plan your backups of
critical data and how you will transfer data off the system throughout
the project.</p>
<p>On ARCHER2, the home file systems are backed up so you can restore
data you deleted by mistake. A copy of the data on home file system is
also kept off site for disaster recovery purposes. The work file systems
are not backed up in any way.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="transferring-data">Transferring Data<a class="anchor" aria-label="anchor" href="#transferring-data"></a>
</h2>
<hr class="half-width">
<p>As mentioned above, many users run into the challenge of transferring
large amounts of data off HPC systems at some point (this is more often
in transferring data off than onto systems but the advice below applies
in either case). Data transfer speed may be limited by many different
factors so the best data transfer mechanism to use depends on the type
of data being transferred and where the data is going.</p>
<p>The components between your data’s source and destination have
varying levels of performance, and in particular, may have different
capabilities with respect to <strong>bandwidth</strong> and
<strong>latency</strong>.</p>
<p><strong>Bandwidth</strong> is generally the raw amount of data per
unit time a device is capable of transmitting or receiving. It’s a
common and generally well-understood metric.</p>
<p><strong>Latency</strong> is a bit more subtle. For data transfers, it
may be thought of as the amount of time it takes to get data out of
storage and into a transmittable form. Latency issues are the reason
it’s advisable to execute data transfers by moving a small number of
large files, rather than the converse.</p>
<p>Some of the key components and their associated issues are:</p>
<ul>
<li>
<strong>Disk speed</strong>: File systems on HPC systems are often
highly parallel, consisting of a very large number of high performance
disk drives. This allows them to support a very high data bandwidth.
Unless the remote system has a similar parallel file system you may find
your transfer speed limited by disk performance at that end.</li>
<li>
<strong>Meta-data performance</strong>: <em>Meta-data
operations</em> such as opening and closing files or listing the owner
or size of a file are much less parallel than read/write operations. If
your data consists of a very large number of small files you may find
your transfer speed is limited by meta-data operations. Meta-data
operations performed by other users of the system can also interact
strongly with those you perform so reducing the number of such
operations you use (by combining multiple files into a single file) may
reduce variability in your transfer rates and increase transfer
speeds.</li>
<li>
<strong>Network speed</strong>: Data transfer performance can be
limited by network speed. More importantly it is limited by the slowest
section of the network between source and destination. If you are
transferring to your laptop/workstation, this is likely to be its
connection (either via LAN or WiFi).</li>
<li>
<strong>Firewall speed</strong>: Most modern networks are protected
by some form of firewall that filters out malicious traffic. This
filtering has some overhead and can result in a reduction in data
transfer performance. The needs of a general purpose network that hosts
email/web-servers and desktop machines are quite different from a
research network that needs to support high volume data transfers. If
you are trying to transfer data to or from a host on a general purpose
network you may find the firewall for that network will limit the
transfer rate you can achieve.</li>
</ul>
<p>As mentioned above, if you have related data that consists of a large
number of small files it is strongly recommended to pack the files into
a larger <em>archive</em> file for long term storage and transfer. A
single large file makes more efficient use of the file system and is
easier to move, copy and transfer because significantly fewer metadata
operations are required. Archive files can be created using tools like
<code>tar</code> and <code>zip</code>. We have already met
<code>tar</code> when we talked about data transfer earlier.</p>
<div id="consider-the-best-way-to-transfer-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="consider-the-best-way-to-transfer-data" class="callout-inner">
<h3 class="callout-title">Consider the Best Way to Transfer Data</h3>
<div class="callout-content">
<p>If you are transferring large amounts of data you will need to think
about what may affect your transfer performance. It is always useful to
run some tests that you can use to extrapolate how long it will take to
transfer your data. Say you have a “data” folder containing 10,000 or so
files, a healthy mix of small and large ASCII and binary data. Which of
the following would be the best way to transfer them to Rocket?</p>
<ol style="list-style-type: decimal">
<li>Using <code>scp</code>?</li>
</ol>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ scp <span class="at">-r</span> data userid@rocket.hpc:~/</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Using <code>rsync</code>?</li>
</ol>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ rsync <span class="at">-ra</span> data userid@rocket.hpc:~/</span></code></pre>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Using <code>rsync</code> with compression?</li>
</ol>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ rsync <span class="at">-raz</span> data userid@rocket.hpc:~/</span></code></pre>
</div>
<ol start="4" style="list-style-type: decimal">
<li>Creating a <code>tar</code> archive first for
<code>rsync</code>?</li>
</ol>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ tar <span class="at">-cvf</span> data.tar data</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ rsync <span class="at">-raz</span> data.tar userid@rocket.hpc:~/</span></code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li>Creating a compressed <code>tar</code> archive for
<code>rsync</code>?</li>
</ol>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ tar <span class="at">-cvzf</span> data.tar.gz data</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">[user@laptop</span> ~]$ rsync <span class="at">-ra</span> data.tar.gz userid@rocket.hpc:~/</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>Lets go through each option</p>
<ol style="list-style-type: decimal">
<li>
<code>scp</code> will recursively copy the directory. This works,
but without compression.</li>
<li>
<code>rsync -ra</code> works like <code>scp -r</code>, but preserves
file information like creation times. This is marginally better.</li>
<li>
<code>rsync -raz</code> adds compression, which will save some
bandwidth. If you have a strong CPU at both ends of the line, and you’re
on a slow network, this is a good choice.</li>
<li>This command first uses <code>tar</code> to merge everything into a
single file, then <code>rsync -z</code> to transfer it with compression.
With this large <em>number</em> of files, metadata overhead can hamper
your transfer, so this is a good idea.</li>
<li>This command uses <code>tar -z</code> to compress the archive, then
<code>rsync</code> to transfer it. This may perform similarly to #4, but
in most cases (for large datasets), it’s the best combination of high
throughput and low latency (making the most of your time and network
connection).</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>“Be careful how you use the login node.”</li>
<li>“Your data on the system is your responsibility.”</li>
<li>“Plan and test large data transfers.”</li>
<li>“It is often best to convert many files to a single archive file
before transferring.”</li>
<li>“Again, don’t run stuff on the login node.”</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-test"><p>Content from <a href="test.html">Using Markdown</a></p>
<hr>
<p>Last updated on 2025-02-12 |

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/episodes/test.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do you write a lesson using Markdown and
<a href="https://carpentries.github.io/sandpaper/" class="external-link">sandpaper</a>?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how to use markdown with The Carpentries Workbench</li>
<li>Demonstrate how to include pieces of code, figures, and nested
challenge blocks</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<hr class="half-width">
<p>This is a lesson created via The Carpentries Workbench. It is written
in <a href="https://pandoc.org/MANUAL.html" class="external-link">Pandoc-flavored Markdown</a>
for static files and <a href="https://rmarkdown.rstudio.com/" class="external-link">R
Markdown</a> for dynamic files that can render code into output. Please
refer to the <a href="https://carpentries.github.io/sandpaper-docs/" class="external-link">Introduction to The
Carpentries Workbench</a> for full documentation.</p>
<p>What you need to know is that there are three sections required for a
valid Carpentries lesson:</p>
<ol style="list-style-type: decimal">
<li>
<code>questions</code> are displayed at the beginning of the episode
to prime the learner for the content.</li>
<li>
<code>objectives</code> are the learning objectives for an episode
displayed with the questions.</li>
<li>
<code>keypoints</code> are displayed at the end of the episode to
reinforce the objectives.</li>
</ol>
<div id="challenge-1-can-you-do-it" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1-can-you-do-it" class="callout-inner">
<h3 class="callout-title">Challenge 1: Can you do it?</h3>
<div class="callout-content">
<p>What is the output of this command?</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">paste</span><span class="op">(</span><span class="st">"This"</span>, <span class="st">"new"</span>, <span class="st">"lesson"</span>, <span class="st">"looks"</span>, <span class="st">"good"</span><span class="op">)</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Output </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>[1] "This new lesson looks good"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="challenge-2-how-do-you-nest-solutions-within-challenge-blocks" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2-how-do-you-nest-solutions-within-challenge-blocks" class="callout-inner">
<h3 class="callout-title">Challenge 2: how do you nest solutions within challenge blocks?</h3>
<div class="callout-content">

</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>You can add a line with at least three colons and a
<code>solution</code> tag.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="figures">Figures<a class="anchor" aria-label="anchor" href="#figures"></a>
</h2>
<hr class="half-width">
<p>You can use standard markdown for static figures with the following
syntax:</p>
<p><code>![optional caption that appears below the figure](figure url){alt='alt text for accessibility purposes'}</code></p>
<figure><img src="https://raw.githubusercontent.com/carpentries/logo/master/Badge_Carpentries.svg" alt="Blue Carpentries hex person logo with no text." class="figure mx-auto d-block"><div class="figcaption">You belong in The Carpentries!</div>
</figure><div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>Callout sections can highlight information.</p>
<p>They are sometimes used to emphasise particularly important points
but are also used in some lessons to present “asides”: content that is
not central to the narrative of the lesson, e.g. by providing the answer
to a commonly-asked question.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="math">Math<a class="anchor" aria-label="anchor" href="#math"></a>
</h2>
<hr class="half-width">
<p>One of our episodes contains <span class="math inline">\(\LaTeX\)</span> equations when describing how to
create dynamic reports with {knitr}, so we now use mathjax to describe
this:</p>
<p><code>$\alpha = \dfrac{1}{(1 - \beta)^2}$</code> becomes: <span class="math inline">\(\alpha = \dfrac{1}{(1 - \beta)^2}\)</span></p>
<p>Cool, right?</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use <code>.md</code> files for episodes when you want static
content</li>
<li>Use <code>.Rmd</code> files for episodes when you need to generate
output</li>
<li>Run <code>sandpaper::check_lesson()</code> to identify any issues
with your lesson</li>
<li>Run <code>sandpaper::build_lesson()</code> to preview your lesson
locally</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://carolbooth2.github.io/hpc-intro-draft4/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://carolbooth2.github.io/hpc-intro-draft4/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://carolbooth2.github.io/hpc-intro-draft4/" class="external-link">Source</a></p>
				<p><a href="https://carolbooth2.github.io/hpc-intro-draft4/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:workshoporganisation@group.newcastle.ac.uk">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.11" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.7" class="external-link">pegboard (0.7.7)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.5" class="external-link">varnish (1.0.5)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://hpc-intro-draft4.github.io/NA/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://hpc-intro-draft4.github.io/NA/aio.html",
  "identifier": "https://hpc-intro-draft4.github.io/NA/aio.html",
  "dateCreated": "2025-02-12",
  "dateModified": "2025-02-17",
  "datePublished": "2025-02-17"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

